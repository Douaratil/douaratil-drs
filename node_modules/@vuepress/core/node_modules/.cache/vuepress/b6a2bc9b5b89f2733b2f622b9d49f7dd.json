{"remainingRequest":"/home/olivier/Documents/douaratil-drs/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/olivier/Documents/douaratil-drs/docs/.vuepress/theme/layouts/MyMonstersLayout.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/olivier/Documents/douaratil-drs/docs/.vuepress/theme/layouts/MyMonstersLayout.vue","mtime":1634294763189},{"path":"/home/olivier/Documents/douaratil-drs/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/olivier/Documents/douaratil-drs/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/olivier/Documents/douaratil-drs/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/olivier/Documents/douaratil-drs/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBCcmVhZGNydW1iIGZyb20gJ0B0aGVtZS9jb21wb25lbnRzL0JyZWFkY3J1bWInCmltcG9ydCBNeU1vbnN0ZXJzIGZyb20gJ0B0aGVtZS9jb21wb25lbnRzL015TW9uc3RlcnMnCmltcG9ydCB7IHNhdmVBcyB9IGZyb20gJ2ZpbGUtc2F2ZXInCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ015TW9uc3RlcnNMYXlvdXQnLAoKICBjb21wb25lbnRzOiB7CiAgICBCcmVhZGNydW1iLAogICAgTXlNb25zdGVycwogIH0sCgogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNVcGxvYWRpbmc6IGZhbHNlLAogICAgICBjb25maXJtRGVsZXRlRGlhbG9nOiBmYWxzZSwKICAgICAgYWxlcnRPcGVuOiBmYWxzZSwKICAgICAgYWxlcnRUZXh0OiBudWxsLAogICAgICBhbGVydFR5cGU6ICJpbmZvIgogICAgfQogIH0sCgogIG1ldGhvZHM6IHsKICAgIGRvd25sb2FkICgpIHsKICAgICAgc2F2ZUFzKG5ldyBCbG9iKFtKU09OLnN0cmluZ2lmeSh0aGlzLiRzdG9yZS5zdGF0ZS5teU1vbnN0ZXJzKV0sIHsKICAgICAgICAgIHR5cGU6ICJ0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgiCiAgICAgIH0pLCAiYmVzdGlhaXJlLmpzb24iKQogICAgfSwKCiAgICB1cGxvYWQgKGUpIHsKICAgICAgbGV0IGZpbGUgPSBlLnRhcmdldC5maWxlc1swXQogICAgICBpZiAoIWZpbGUpIHsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKQogICAgICBsZXQgc2VsZiA9IHRoaXMKCiAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgICBsZXQgcmVzdWx0ID0gSlNPTi5wYXJzZShyZWFkZXIucmVzdWx0KQogICAgICAgIGxldCBpc1ZhbGlkID0gdHJ1ZQogICAgICAgIGlmIChyZXN1bHQubW9uc3RlcnMgJiYgcmVzdWx0Lm1vbnN0ZXJzLmxlbmd0aCA+PSAxKSB7CiAgICAgICAgICBmb3IgKHZhciBzIG9mIHJlc3VsdC5tb25zdGVycykgewogICAgICAgICAgICBpZiAocy5waWQgIT09ICdtb25zdGVyJykgewogICAgICAgICAgICAgIGlzVmFsaWQgPSBmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlzVmFsaWQgPSBmYWxzZQogICAgICAgIH0KICAgICAgICBpZiAoaXNWYWxpZCkgewogICAgICAgICAgc2VsZi4kc3RvcmUuY29tbWl0KCdteU1vbnN0ZXJzL3NldE1vbnN0ZXJzJywgcmVzdWx0Lm1vbnN0ZXJzKQogICAgICAgICAgaWYgKHJlc3VsdC5ub3RQcmludGVkTW9uc3RlcnMpIHsKICAgICAgICAgICAgc2VsZi4kc3RvcmUuY29tbWl0KCdteU1vbnN0ZXJzL3NldE5vdFByaW50ZWRNb25zdGVycycsIHJlc3VsdC5ub3RQcmludGVkTW9uc3RlcnMpCiAgICAgICAgICB9CiAgICAgICAgICBzZWxmLiRzdG9yZS5jb21taXQoJ3NldFNuYWNrYmFyVGV4dCcsIHNlbGYuJHN0b3JlLnN0YXRlLm15TW9uc3RlcnMubW9uc3RlcnMubGVuZ3RoICsgIiBtb25zdHJlcyBpbnNjcml0cyBkYW5zIHZvdHJlIGJlc3RpYWlyZSIpCiAgICAgICAgICBzZWxmLiRzdG9yZS5jb21taXQoJ3NldElzT3BlblNuYWNrYmFyJywgdHJ1ZSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2VsZi4kc3RvcmUuY29tbWl0KCdzZXRTbmFja2JhclRleHQnLCAiTGUgZmljaGllciBlc3QgaW52YWxpZGUiKQogICAgICAgICAgc2VsZi4kc3RvcmUuY29tbWl0KCdzZXRJc09wZW5TbmFja2JhcicsIHRydWUpCiAgICAgICAgfQogICAgICB9CgogICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKQogICAgICB0aGlzLiRyZWZzLnVwbG9hZGVyLnZhbHVlID0gJycKICAgIH0sCgogICAgb25VcGxvYWRDbGljayAoKSB7CiAgICAgIHRoaXMuaXNVcGxvYWRpbmcgPSB0cnVlCiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsICgpID0+IHsKICAgICAgICB0aGlzLmlzVXBsb2FkaW5nID0gZmFsc2UKICAgICAgfSwgeyBvbmNlOiB0cnVlIH0pCgogICAgICB0aGlzLiRyZWZzLnVwbG9hZGVyLmNsaWNrKCkKICAgIH0sCgogICAgcHJpbnQgKCkgewogICAgICB3aW5kb3cucHJpbnQoKQogICAgfSwKCiAgICBjb25maXJtRGVsZXRpb24gKCkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ215TW9uc3RlcnMvcmVzZXRNb25zdGVycycpCiAgICAgIHRoaXMuY29uZmlybURlbGV0ZURpYWxvZyA9IGZhbHNlCiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0U25hY2tiYXJUZXh0JywgIlZvdHJlIGJlc3RpYWlyZSBhIMOpdMOpIGVmZmFjw6kiKQogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldElzT3BlblNuYWNrYmFyJywgdHJ1ZSkKICAgIH0KICB9LAoKICBtb3VudGVkICgpIHsKICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0SGFzUmlnaHREcmF3ZXInLCBmYWxzZSkKICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0UmlnaHREcmF3ZXInLCB0aGlzLiR2dWV0aWZ5LmJyZWFrcG9pbnQubGdBbmRVcCkKICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0SW5SaWdodERyYXdlcicsIG51bGwpCiAgfQp9Cg=="},{"version":3,"sources":["MyMonstersLayout.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"MyMonstersLayout.vue","sourceRoot":"docs/.vuepress/theme/layouts","sourcesContent":["<template>\n  <div class=\"my-monsters\">\n    <div class=\"d-flex align-center mb-4 d-print-none\">\n      <Breadcrumb class=\"mr-auto\" />\n      <v-btn :outlined=\"!$store.state.l5r\" color=\"primary\" class=\"mr-4\" depressed @click=\"$store.commit('setL5r', !$store.state.l5r)\"><span class=\"orn\">8</span> Règles cinq royaumes</v-btn>\n      <v-btn color=\"primary\" class=\"mr-4\" depressed link to=\"/creation-de-monstre-pnj/\"><v-icon left>mdi-plus</v-icon> Créer un monstre</v-btn>\n      <v-btn color=\"primary\" depressed link to=\"/bestiaire/\">Bestiaire</v-btn>\n    </div>\n\n\n    <v-dialog v-model=\"confirmDeleteDialog\" max-width=\"290\">\n      <v-card>\n        <v-card-title class=\"headline\">Supprimer le bestiaire</v-card-title>\n\n        <v-card-text>\n          Cette action supprimera tous les monstres ajoutés à votre bestiaire, y compris les monstres que vous avez créés. Souhaitez vous les supprimer ?\n        </v-card-text>\n\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn depressed @click=\"confirmDeleteDialog = false\">\n            Annuler\n          </v-btn>\n\n          <v-btn color=\"error darken-1\" depressed @click=\"confirmDeletion\">\n            Supprimer\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n    <v-alert v-model=\"alertOpen\" :type=\"alertType\" dismissible transition=\"fade-transition\">\n      {{ alertText }}\n    </v-alert>\n\n    <MyMonsters />\n  </div>\n</template>\n\n<script>\nimport Breadcrumb from '@theme/components/Breadcrumb'\nimport MyMonsters from '@theme/components/MyMonsters'\nimport { saveAs } from 'file-saver'\n\nexport default {\n  name: 'MyMonstersLayout',\n\n  components: {\n    Breadcrumb,\n    MyMonsters\n  },\n\n  data () {\n    return {\n      isUploading: false,\n      confirmDeleteDialog: false,\n      alertOpen: false,\n      alertText: null,\n      alertType: \"info\"\n    }\n  },\n\n  methods: {\n    download () {\n      saveAs(new Blob([JSON.stringify(this.$store.state.myMonsters)], {\n          type: \"text/plain;charset=utf-8\"\n      }), \"bestiaire.json\")\n    },\n\n    upload (e) {\n      let file = e.target.files[0]\n      if (!file) {\n        return\n      }\n      let reader = new FileReader()\n      let self = this\n\n      reader.onload = function() {\n        let result = JSON.parse(reader.result)\n        let isValid = true\n        if (result.monsters && result.monsters.length >= 1) {\n          for (var s of result.monsters) {\n            if (s.pid !== 'monster') {\n              isValid = false\n            }\n          }\n        } else {\n          isValid = false\n        }\n        if (isValid) {\n          self.$store.commit('myMonsters/setMonsters', result.monsters)\n          if (result.notPrintedMonsters) {\n            self.$store.commit('myMonsters/setNotPrintedMonsters', result.notPrintedMonsters)\n          }\n          self.$store.commit('setSnackbarText', self.$store.state.myMonsters.monsters.length + \" monstres inscrits dans votre bestiaire\")\n          self.$store.commit('setIsOpenSnackbar', true)\n        } else {\n          self.$store.commit('setSnackbarText', \"Le fichier est invalide\")\n          self.$store.commit('setIsOpenSnackbar', true)\n        }\n      }\n\n      reader.readAsText(file)\n      this.$refs.uploader.value = ''\n    },\n\n    onUploadClick () {\n      this.isUploading = true\n      window.addEventListener('focus', () => {\n        this.isUploading = false\n      }, { once: true })\n\n      this.$refs.uploader.click()\n    },\n\n    print () {\n      window.print()\n    },\n\n    confirmDeletion () {\n      this.$store.commit('myMonsters/resetMonsters')\n      this.confirmDeleteDialog = false\n      this.$store.commit('setSnackbarText', \"Votre bestiaire a été effacé\")\n      this.$store.commit('setIsOpenSnackbar', true)\n    }\n  },\n\n  mounted () {\n    this.$store.commit('setHasRightDrawer', false)\n    this.$store.commit('setRightDrawer', this.$vuetify.breakpoint.lgAndUp)\n    this.$store.commit('setInRightDrawer', null)\n  }\n}\n</script>\n\n<style>\n</style>\n"]}]}