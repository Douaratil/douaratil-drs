{"remainingRequest":"/home/olivier/Documents/douaratil-drs/node_modules/babel-loader/lib/index.js??ref--3-1!/home/olivier/Documents/douaratil-drs/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/olivier/Documents/douaratil-drs/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/olivier/Documents/douaratil-drs/docs/.vuepress/theme/layouts/MySpellsLayout.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/olivier/Documents/douaratil-drs/docs/.vuepress/theme/layouts/MySpellsLayout.vue","mtime":1640161622032},{"path":"/home/olivier/Documents/douaratil-drs/node_modules/cache-loader/dist/cjs.js","mtime":1640785878621},{"path":"/home/olivier/Documents/douaratil-drs/node_modules/babel-loader/lib/index.js","mtime":1640785878529},{"path":"/home/olivier/Documents/douaratil-drs/node_modules/cache-loader/dist/cjs.js","mtime":1640785878621},{"path":"/home/olivier/Documents/douaratil-drs/node_modules/vue-loader/lib/index.js","mtime":1640785880897}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9ob21lL29saXZpZXIvRG9jdW1lbnRzL2RvdWFyYXRpbC1kcnMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgQnJlYWRjcnVtYiBmcm9tICdAdGhlbWUvY29tcG9uZW50cy9CcmVhZGNydW1iJzsKaW1wb3J0IE15U3BlbGxzIGZyb20gJ0B0aGVtZS9jb21wb25lbnRzL015U3BlbGxzJzsKaW1wb3J0IHsgc2F2ZUFzIH0gZnJvbSAnZmlsZS1zYXZlcic7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTXlTcGVsbHNMYXlvdXQnLAogIGNvbXBvbmVudHM6IHsKICAgIEJyZWFkY3J1bWI6IEJyZWFkY3J1bWIsCiAgICBNeVNwZWxsczogTXlTcGVsbHMKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc1VwbG9hZGluZzogZmFsc2UsCiAgICAgIGNvbmZpcm1EZWxldGVEaWFsb2c6IGZhbHNlLAogICAgICBhbGVydE9wZW46IGZhbHNlLAogICAgICBhbGVydFRleHQ6IG51bGwsCiAgICAgIGFsZXJ0VHlwZTogImluZm8iCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgZG93bmxvYWQ6IGZ1bmN0aW9uIGRvd25sb2FkKCkgewogICAgICBzYXZlQXMobmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KHRoaXMuJHN0b3JlLnN0YXRlLm15U3BlbGxzKV0sIHsKICAgICAgICB0eXBlOiAidGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04IgogICAgICB9KSwgImdyaW1vaXJlLmpzb24iKTsKICAgIH0sCiAgICB1cGxvYWQ6IGZ1bmN0aW9uIHVwbG9hZChlKSB7CiAgICAgIHZhciBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF07CgogICAgICBpZiAoIWZpbGUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciByZXN1bHQgPSBKU09OLnBhcnNlKHJlYWRlci5yZXN1bHQpOwogICAgICAgIHZhciBpc1ZhbGlkID0gdHJ1ZTsKCiAgICAgICAgaWYgKHJlc3VsdC5zcGVsbHMgJiYgcmVzdWx0LnNwZWxscy5sZW5ndGggPj0gMSkgewogICAgICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHJlc3VsdC5zcGVsbHMpLAogICAgICAgICAgICAgIF9zdGVwOwoKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgdmFyIHMgPSBfc3RlcC52YWx1ZTsKCiAgICAgICAgICAgICAgaWYgKHMucGlkICE9PSAnc3BlbGwnKSB7CiAgICAgICAgICAgICAgICBpc1ZhbGlkID0gZmFsc2U7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlzVmFsaWQgPSBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGlmIChpc1ZhbGlkKSB7CiAgICAgICAgICBzZWxmLiRzdG9yZS5jb21taXQoJ215U3BlbGxzL3NldFNwZWxscycsIHJlc3VsdC5zcGVsbHMpOwoKICAgICAgICAgIGlmIChyZXN1bHQuc3BlbGxTbG90cykgewogICAgICAgICAgICBzZWxmLiRzdG9yZS5jb21taXQoJ215U3BlbGxzL3NldFNwZWxsU2xvdHMnLCByZXN1bHQuc3BlbGxTbG90cyk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHJlc3VsdC5ub3RQcmludGVkU3BlbGxzKSB7CiAgICAgICAgICAgIHNlbGYuJHN0b3JlLmNvbW1pdCgnbXlTcGVsbHMvc2V0Tm90UHJpbnRlZFNwZWxscycsIHJlc3VsdC5ub3RQcmludGVkU3BlbGxzKTsKICAgICAgICAgIH0KCiAgICAgICAgICBzZWxmLiRzdG9yZS5jb21taXQoJ3NldFNuYWNrYmFyVGV4dCcsIHNlbGYuJHN0b3JlLnN0YXRlLm15U3BlbGxzLnNwZWxscy5sZW5ndGggKyAiIHNvcnRzIGluc2NyaXRzIGRhbnMgdm90cmUgZ3JpbW9pcmUiKTsKICAgICAgICAgIHNlbGYuJHN0b3JlLmNvbW1pdCgnc2V0SXNPcGVuU25hY2tiYXInLCB0cnVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2VsZi4kc3RvcmUuY29tbWl0KCdzZXRTbmFja2JhclRleHQnLCAiTGUgZmljaGllciBlc3QgaW52YWxpZGUiKTsKICAgICAgICAgIHNlbGYuJHN0b3JlLmNvbW1pdCgnc2V0SXNPcGVuU25hY2tiYXInLCB0cnVlKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTsKICAgICAgdGhpcy4kcmVmcy51cGxvYWRlci52YWx1ZSA9ICcnOwogICAgfSwKICAgIG9uVXBsb2FkQ2xpY2s6IGZ1bmN0aW9uIG9uVXBsb2FkQ2xpY2soKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmlzVXBsb2FkaW5nID0gdHJ1ZTsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLmlzVXBsb2FkaW5nID0gZmFsc2U7CiAgICAgIH0sIHsKICAgICAgICBvbmNlOiB0cnVlCiAgICAgIH0pOwogICAgICB0aGlzLiRyZWZzLnVwbG9hZGVyLmNsaWNrKCk7CiAgICB9LAogICAgcHJpbnQ6IGZ1bmN0aW9uIHByaW50KCkgewogICAgICB3aW5kb3cucHJpbnQoKTsKICAgIH0sCiAgICBjb25maXJtRGVsZXRpb246IGZ1bmN0aW9uIGNvbmZpcm1EZWxldGlvbigpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdteVNwZWxscy9yZXNldFNwZWxscycpOwogICAgICB0aGlzLmNvbmZpcm1EZWxldGVEaWFsb2cgPSBmYWxzZTsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRTbmFja2JhclRleHQnLCAiVm90cmUgZ3JpbW9pcmUgYSDDqXTDqSBlZmZhY8OpIik7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0SXNPcGVuU25hY2tiYXInLCB0cnVlKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldEhhc1JpZ2h0RHJhd2VyJywgZmFsc2UpOwogICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRSaWdodERyYXdlcicsIHRoaXMuJHZ1ZXRpZnkuYnJlYWtwb2ludC5sZ0FuZFVwKTsKICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0SW5SaWdodERyYXdlcicsIG51bGwpOwogIH0KfTs="},{"version":3,"sources":["MySpellsLayout.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"my-spells\">\n    <div class=\"d-flex flex-wrap align-center d-print-none\">\n      <Breadcrumb class=\"mr-auto mb-4\" />\n    </div>\n\n    <h1>Mon grimoire</h1>\n\n    <div class=\"my-4 d-flex flex-wrap d-print-none\">\n      <v-btn outlined color=\"accent\" class=\"mr-1 mb-1\" depressed @click=\"print\" :disabled=\"$store.state.mySpells.spells.length <= 0\"><v-icon>mdi-printer</v-icon> Imprimer</v-btn>\n      <v-btn outlined color=\"accent\" class=\"mr-1 mb-1\" depressed @click=\"download\" :disabled=\"$store.state.mySpells.spells.length <= 0\"><v-icon>mdi-file-download</v-icon> Sauvegarder</v-btn>\n      <v-btn outlined color=\"accent\" class=\"mr-1 mb-1\" depressed :loading=\"isUploading\" @click=\"onUploadClick\">\n        <v-icon left>mdi-file-upload</v-icon> Charger\n      </v-btn>\n      <input ref=\"uploader\" class=\"d-none\" type=\"file\" @change=\"upload\">\n      <v-btn outlined color=\"error\" class=\"mb-1\" depressed @click.stop=\"confirmDeleteDialog = true\" :disabled=\"$store.state.mySpells.spells.length <= 0\"><v-icon>mdi-delete</v-icon> Effacer le grimoire</v-btn>\n    </div>\n\n    <v-dialog v-model=\"confirmDeleteDialog\" max-width=\"290\">\n      <v-card>\n        <v-card-title class=\"headline\">Supprimer le grimoire</v-card-title>\n\n        <v-card-text>\n          Cette action supprimera tous les sorts ajoutés à votre grimoire, y compris les sorts que vous avez créés. Souhaitez vous les supprimer ?\n        </v-card-text>\n\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn depressed @click=\"confirmDeleteDialog = false\">\n            Annuler\n          </v-btn>\n\n          <v-btn color=\"error darken-1\" depressed @click=\"confirmDeletion\">\n            Supprimer\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n    <v-alert v-model=\"alertOpen\" :type=\"alertType\" dismissible transition=\"fade-transition\">\n      {{ alertText }}\n    </v-alert>\n\n    <MySpells />\n  </div>\n</template>\n\n<script>\nimport Breadcrumb from '@theme/components/Breadcrumb'\nimport MySpells from '@theme/components/MySpells'\nimport { saveAs } from 'file-saver'\n\nexport default {\n  name: 'MySpellsLayout',\n\n  components: {\n    Breadcrumb,\n    MySpells\n  },\n\n  data () {\n    return {\n      isUploading: false,\n      confirmDeleteDialog: false,\n      alertOpen: false,\n      alertText: null,\n      alertType: \"info\"\n    }\n  },\n\n  methods: {\n    download () {\n      saveAs(new Blob([JSON.stringify(this.$store.state.mySpells)], {\n          type: \"text/plain;charset=utf-8\"\n      }), \"grimoire.json\")\n    },\n\n    upload (e) {\n      let file = e.target.files[0]\n      if (!file) {\n        return\n      }\n      let reader = new FileReader()\n      let self = this\n\n      reader.onload = function() {\n        let result = JSON.parse(reader.result)\n        let isValid = true\n        if (result.spells && result.spells.length >= 1) {\n          for (var s of result.spells) {\n            if (s.pid !== 'spell') {\n              isValid = false\n            }\n          }\n        } else {\n          isValid = false\n        }\n        if (isValid) {\n          self.$store.commit('mySpells/setSpells', result.spells)\n          if (result.spellSlots) {\n            self.$store.commit('mySpells/setSpellSlots', result.spellSlots)\n          }\n          if (result.notPrintedSpells) {\n            self.$store.commit('mySpells/setNotPrintedSpells', result.notPrintedSpells)\n          }\n          self.$store.commit('setSnackbarText', self.$store.state.mySpells.spells.length + \" sorts inscrits dans votre grimoire\")\n          self.$store.commit('setIsOpenSnackbar', true)\n        } else {\n          self.$store.commit('setSnackbarText', \"Le fichier est invalide\")\n          self.$store.commit('setIsOpenSnackbar', true)\n        }\n      }\n\n      reader.readAsText(file)\n      this.$refs.uploader.value = ''\n    },\n\n    onUploadClick () {\n      this.isUploading = true\n      window.addEventListener('focus', () => {\n        this.isUploading = false\n      }, { once: true })\n\n      this.$refs.uploader.click()\n    },\n\n    print () {\n      window.print()\n    },\n\n    confirmDeletion () {\n      this.$store.commit('mySpells/resetSpells')\n      this.confirmDeleteDialog = false\n      this.$store.commit('setSnackbarText', \"Votre grimoire a été effacé\")\n      this.$store.commit('setIsOpenSnackbar', true)\n    }\n  },\n\n  mounted () {\n    this.$store.commit('setHasRightDrawer', false)\n    this.$store.commit('setRightDrawer', this.$vuetify.breakpoint.lgAndUp)\n    this.$store.commit('setInRightDrawer', null)\n  }\n}\n</script>\n\n<style>\n</style>\n"],"sourceRoot":"docs/.vuepress/theme/layouts"}]}