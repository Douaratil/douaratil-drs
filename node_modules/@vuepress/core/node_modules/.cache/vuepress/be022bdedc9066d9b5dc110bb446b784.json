{"remainingRequest":"/home/olivier/Documents/douaratil-drs/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/olivier/Documents/douaratil-drs/docs/.vuepress/theme/components/AbilityCalculator.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/olivier/Documents/douaratil-drs/docs/.vuepress/theme/components/AbilityCalculator.vue","mtime":1640161622024},{"path":"/home/olivier/Documents/douaratil-drs/node_modules/cache-loader/dist/cjs.js","mtime":1640785878621},{"path":"/home/olivier/Documents/douaratil-drs/node_modules/babel-loader/lib/index.js","mtime":1640785878529},{"path":"/home/olivier/Documents/douaratil-drs/node_modules/cache-loader/dist/cjs.js","mtime":1640785878621},{"path":"/home/olivier/Documents/douaratil-drs/node_modules/vue-loader/lib/index.js","mtime":1640785880897}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldE1vZGlmaWVyLCBkaXNwbGF5Qm9udXMsIGRpc3BsYXlBYmlsaXR5U2NvcmUgfSBmcm9tICdAdGhlbWUvdXRpbC9tb25zdGVySGVscGVycycKaW1wb3J0IHsgQUJJTElUWVNDT1JFQ09TVFMsIEFCSUxJVFlTQ09SRVMsIFBPV0VSVElFUlMgfSBmcm9tICcuLi8uLi9kYXRhL2FiaWxpdHlTY29yZXMnCmltcG9ydCB7IHJhY2VzIH0gZnJvbSAnLi4vLi4vZGF0YS9yYWNlcycKCmNvbnN0IEdFTkVSQVRJT05fTUVUSE9EX0NIT0lDRVMgPSBbCiAgeyB0ZXh0OiAnTcOpdGhvZGUgZml4ZScsIHZhbHVlOiAnc3RhbmRhcmRBcnJheScgfSwKICB7IHRleHQ6ICdNw6l0aG9kZSBwYXIgcsOpcGFydGl0aW9uJywgdmFsdWU6ICdwb2ludEJ1eScgfQpdCgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBnZW5lcmF0aW9uTWV0aG9kQ2hvaWNlczogR0VORVJBVElPTl9NRVRIT0RfQ0hPSUNFUywKICAgICAgZ2VuZXJhdGlvbk1ldGhvZDogR0VORVJBVElPTl9NRVRIT0RfQ0hPSUNFU1sxXS52YWx1ZSwKICAgICAgYWJpbGl0eVNjb3JlQ29zdHM6IEFCSUxJVFlTQ09SRUNPU1RTLAogICAgICBwb3dlclRpZXJzOiBQT1dFUlRJRVJTLAogICAgICBhYmlsaXR5U2NvcmVzQ2hvaWNlczogbnVsbCwKICAgICAgcmFjZXM6IHJhY2VzLAogICAgICBzZWxlY3RlZFN1YnJhY2U6IG51bGwsCiAgICAgIHNlbGVjdGVkUmFjZTogbnVsbCwKICAgICAgcmFjZTogbnVsbCwKICAgICAgcG93ZXJUaWVyOiBQT1dFUlRJRVJTWzFdLAogICAgICBhYmlsaXR5U2NvcmVzOiBbCiAgICAgICAgeyBrZXk6ICdmb3InLCBsYWJlbDogJ0ZvcmNlJywgdmFsdWU6IDgsIHJhY2lhbEJvbnVzOiAwfSwKICAgICAgICB7IGtleTogJ2RleCcsIGxhYmVsOiAnRGV4dMOpcml0w6knLCB2YWx1ZTogOCwgcmFjaWFsQm9udXM6IDB9LAogICAgICAgIHsga2V5OiAnY29uJywgbGFiZWw6ICdDb25zdGl0dXRpb24nLCB2YWx1ZTogOCwgcmFjaWFsQm9udXM6IDB9LAogICAgICAgIHsga2V5OiAnaW50JywgbGFiZWw6ICdJbnRlbGxpZ2VuY2UnLCB2YWx1ZTogOCwgcmFjaWFsQm9udXM6IDB9LAogICAgICAgIHsga2V5OiAnc2FnJywgbGFiZWw6ICdTYWdlc3NlJywgdmFsdWU6IDgsIHJhY2lhbEJvbnVzOiAwfSwKICAgICAgICB7IGtleTogJ2NoYScsIGxhYmVsOiAnQ2hhcmlzbWUnLCB2YWx1ZTogOCwgcmFjaWFsQm9udXM6IDB9CiAgICAgIF0sCiAgICAgIGFiaWxpdHlCb251c2VzOiBbXQogICAgfQogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBoaW50UG93ZXJUaWVyICgpIHsKICAgICAgaWYgKHRoaXMuZ2VuZXJhdGlvbk1ldGhvZCAmJiB0aGlzLnBvd2VyVGllcikgewogICAgICAgIGlmICh0aGlzLmdlbmVyYXRpb25NZXRob2QgPT0gJ3N0YW5kYXJkQXJyYXknKSB7CiAgICAgICAgICByZXR1cm4gJ1ZhbGV1cnMgZml4ZXMgOiAnICsgdGhpcy5wb3dlclRpZXIuc3RhbmRhcmRBcnJheQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5nZW5lcmF0aW9uTWV0aG9kID09ICdwb2ludEJ1eScpIHsKICAgICAgICAgIHJldHVybiAnUG9pbnRzIGRpc3BvbmlibGVzIDogJyArIHRoaXMucG93ZXJUaWVyLnBvaW50QnV5CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiAnJwogICAgfSwKCiAgICBwb2ludHNSZW1haW5pbmcgKCkgewogICAgICBpZiAoIXRoaXMucG93ZXJUaWVyKSB7CiAgICAgICAgcmV0dXJuIDAKICAgICAgfQogICAgICBsZXQgcG9pbnRTcGVudCA9IDAKICAgICAgZm9yIChsZXQgYWJpbGl0eSBvZiB0aGlzLmFiaWxpdHlTY29yZXMpIHsKICAgICAgICBpZiAoQUJJTElUWVNDT1JFQ09TVFNbYWJpbGl0eS52YWx1ZV0pIHsKICAgICAgICAgIHBvaW50U3BlbnQgKz0gQUJJTElUWVNDT1JFQ09TVFNbYWJpbGl0eS52YWx1ZV0uY29zdAogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdGhpcy5wb3dlclRpZXIucG9pbnRCdXkgLSBwb2ludFNwZW50CiAgICB9LAoKICAgIHN0YW5kYXJkQXJyYXlWYWx1ZXMgKCkgewogICAgICBsZXQgdmFsdWVzID0gQXJyYXkuZnJvbSh0aGlzLnBvd2VyVGllci5zdGFuZGFyZEFycmF5KQogICAgICBmb3IgKGxldCBhYmlsaXR5IG9mIHRoaXMuYWJpbGl0eVNjb3JlcykgewogICAgICAgIGlmIChhYmlsaXR5LnZhbHVlKSB7CiAgICAgICAgICB2YWx1ZXMuc3BsaWNlKHZhbHVlcy5pbmRleE9mKGFiaWxpdHkudmFsdWUpLCAxKQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdmFsdWVzCiAgICB9CiAgfSwKCiAgbWV0aG9kczogewogICAgZ2V0VG90YWwgKGFiaWxpdHkpIHsKICAgICAgbGV0IHRvdGFsID0gMAogICAgICBpZiAoIWFiaWxpdHkudmFsdWUpIHsKICAgICAgICByZXR1cm4gJy0tJwogICAgICB9CiAgICAgIHJldHVybiBwYXJzZUludChhYmlsaXR5LnZhbHVlKSArIHBhcnNlSW50KGFiaWxpdHkucmFjaWFsQm9udXMpCiAgICB9LAoKICAgIGdldEFiaWxpdHlTY29yZUNvc3QgKGFiaWxpdHkpIHsKICAgICAgaWYgKEFCSUxJVFlTQ09SRUNPU1RTW2FiaWxpdHkudmFsdWVdKSB7CiAgICAgICAgcmV0dXJuIEFCSUxJVFlTQ09SRUNPU1RTW2FiaWxpdHkudmFsdWVdLmNvc3QKICAgICAgfQogICAgICByZXR1cm4gbnVsbAogICAgfSwKCiAgICBnZXRNb2RpZmllciAodmFsdWUpIHsKICAgICAgaWYgKHZhbHVlID09ICctLScpIHsKICAgICAgICByZXR1cm4gJy0tJwogICAgICB9CiAgICAgIHJldHVybiBnZXRNb2RpZmllcih2YWx1ZSkKICAgIH0sCgogICAgZGlzcGxheUJvbnVzIChzY29yZSkgewogICAgICByZXR1cm4gZGlzcGxheUJvbnVzKHNjb3JlKQogICAgfSwKCiAgICBzZWxlY3RSYWNlIChjbGVhckFiaWxpdGllcyA9IGZhbHNlLCBjbGVhclN1YnJhY2UgPSBmYWxzZSkgewogICAgICBpZiAoY2xlYXJTdWJyYWNlKSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZFN1YnJhY2UgPSBudWxsCiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkU3VicmFjZSkgewogICAgICAgIHRoaXMucmFjZSA9IHRoaXMuc2VsZWN0ZWRTdWJyYWNlCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5yYWNlID0gdGhpcy5zZWxlY3RlZFJhY2UKICAgICAgfQoKICAgICAgZm9yIChsZXQgYWJpbGl0eSBvZiB0aGlzLmFiaWxpdHlTY29yZXMpIHsKICAgICAgICBhYmlsaXR5LnJhY2lhbEJvbnVzID0gMAogICAgICAgIGlmICh0aGlzLnJhY2UuYWJpbGl0eUJvbnVzZXMpIHsKICAgICAgICAgIGZvciAodmFyIGJvbnVzIG9mIHRoaXMucmFjZS5hYmlsaXR5Qm9udXNlcykgewogICAgICAgICAgICBpZiAoYm9udXMuYWJpbGl0eSA9PSBhYmlsaXR5LmtleSkgewogICAgICAgICAgICAgIGFiaWxpdHkucmFjaWFsQm9udXMgPSBib251cy52YWx1ZQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoY2xlYXJBYmlsaXRpZXMpIHsKICAgICAgICB0aGlzLmFiaWxpdHlCb251c2VzID0gW10KICAgICAgfQoKICAgICAgbGV0IGNob2ljZXMgPSBBcnJheS5mcm9tKEFCSUxJVFlTQ09SRVMpCiAgICAgIGlmICh0aGlzLnJhY2UgJiYgdGhpcy5yYWNlLmFiaWxpdHlCb251c2VzKSB7CiAgICAgICAgZm9yIChsZXQgYWJpbGl0eUJvbnVzIG9mIHRoaXMucmFjZS5hYmlsaXR5Qm9udXNlcykgewogICAgICAgICAgY2hvaWNlcy5zcGxpY2UoY2hvaWNlcy5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLnZhbHVlID09IGFiaWxpdHlCb251cy5rZXkpLCAxKQogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLmFiaWxpdHlTY29yZXNDaG9pY2VzID0gY2hvaWNlcwogICAgfSwKCiAgICBzZWxlY3RBYmlsaXR5Qm9udXMgKGUpIHsKICAgICAgaWYoZS5sZW5ndGggPiB0aGlzLnJhY2UuZnJlZUFiaWxpdHlCb251c2VzLnF0eSkgewogICAgICAgIGUucG9wKCkKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNlbGVjdFJhY2UoKQogICAgICAgIGZvciAobGV0IGJvbnVzIG9mIHRoaXMuYWJpbGl0eUJvbnVzZXMpIHsKICAgICAgICAgIHRoaXMuYWJpbGl0eVNjb3Jlc1t0aGlzLmFiaWxpdHlTY29yZXMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5rZXkgPT0gYm9udXMpXS5yYWNpYWxCb251cyA9IHRoaXMucmFjZS5mcmVlQWJpbGl0eUJvbnVzZXMudmFsdWUKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgc2VsZWN0R2VuZXJhdGlvbk1ldGhvZCAoKSB7CiAgICAgIC8vIFLDqWluaXRpYWxpc2F0aW9uIGRlcyB2YWxldXJzIGF1IGNoYW5nZW1lbnQgZGUgbGEgbcOpdGhvZGUgZCdhdHRyaWJ1dGlvbgogICAgICBpZiAodGhpcy5nZW5lcmF0aW9uTWV0aG9kKSB7CiAgICAgICAgaWYgKHRoaXMuZ2VuZXJhdGlvbk1ldGhvZCA9PSAncG9pbnRCdXknKSB7CiAgICAgICAgICBmb3IgKGxldCBhYmlsaXR5IG9mIHRoaXMuYWJpbGl0eVNjb3JlcykgewogICAgICAgICAgICBhYmlsaXR5LnZhbHVlID0gOAogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5nZW5lcmF0aW9uTWV0aG9kID09ICdzdGFuZGFyZEFycmF5JykgewogICAgICAgICAgZm9yIChsZXQgYWJpbGl0eSBvZiB0aGlzLmFiaWxpdHlTY29yZXMpIHsKICAgICAgICAgICAgYWJpbGl0eS52YWx1ZSA9IG51bGwKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgc2VsZWN0UG93ZXJUaWVyICgpIHsKICAgICAgaWYgKHRoaXMuZ2VuZXJhdGlvbk1ldGhvZCA9PSAnc3RhbmRhcmRBcnJheScpIHsKICAgICAgICBmb3IgKGxldCBhYmlsaXR5IG9mIHRoaXMuYWJpbGl0eVNjb3JlcykgewogICAgICAgICAgYWJpbGl0eS52YWx1ZSA9IG51bGwKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgc2VsZWN0QWJpbGl0eVZhbHVlIChhYmlsaXR5KSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKGFiaWxpdHkpCiAgICB9LAoKICAgIHJlc2V0ICgpIHsKICAgICAgdGhpcy5zZWxlY3RlZFJhY2UgPSBudWxsCiAgICAgIHRoaXMuc2VsZWN0ZWRTdWJyYWNlID0gbnVsbAogICAgICB0aGlzLnJhY2UgPSBudWxsCiAgICAgIHRoaXMuZ2VuZXJhdGlvbk1ldGhvZCA9IEdFTkVSQVRJT05fTUVUSE9EX0NIT0lDRVNbMV0udmFsdWUKICAgICAgdGhpcy5wb3dlclRpZXIgPSBQT1dFUlRJRVJTWzFdCiAgICAgIHRoaXMuYWJpbGl0eVNjb3JlcyA9IFsKICAgICAgICB7IGtleTogJ2ZvcicsIGxhYmVsOiAnRm9yY2UnLCB2YWx1ZTogOCwgcmFjaWFsQm9udXM6IDB9LAogICAgICAgIHsga2V5OiAnZGV4JywgbGFiZWw6ICdEZXh0w6lyaXTDqScsIHZhbHVlOiA4LCByYWNpYWxCb251czogMH0sCiAgICAgICAgeyBrZXk6ICdjb24nLCBsYWJlbDogJ0NvbnN0aXR1dGlvbicsIHZhbHVlOiA4LCByYWNpYWxCb251czogMH0sCiAgICAgICAgeyBrZXk6ICdpbnQnLCBsYWJlbDogJ0ludGVsbGlnZW5jZScsIHZhbHVlOiA4LCByYWNpYWxCb251czogMH0sCiAgICAgICAgeyBrZXk6ICdzYWcnLCBsYWJlbDogJ1NhZ2Vzc2UnLCB2YWx1ZTogOCwgcmFjaWFsQm9udXM6IDB9LAogICAgICAgIHsga2V5OiAnY2hhJywgbGFiZWw6ICdDaGFyaXNtZScsIHZhbHVlOiA4LCByYWNpYWxCb251czogMH0KICAgICAgXQogICAgICB0aGlzLmFiaWxpdHlCb251c2VzID0gW10KICAgIH0KICB9Cn0K"},{"version":3,"sources":["AbilityCalculator.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqFA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AbilityCalculator.vue","sourceRoot":"docs/.vuepress/theme/components","sourcesContent":["<template>\n  <div class=\"ability-scores-calculator\">\n    <v-row>\n      <v-col :cols=\"12\">\n        <v-row>\n          <v-col>\n            <v-btn color=\"primary\" @click.stop=\"reset\"><v-icon>mdi-eraser</v-icon> Réinitialiser</v-btn>\n          </v-col>\n        </v-row>\n\n        <v-row>\n          <v-col>\n            <v-select dense :items=\"races\" label=\"Race\" item-text=\"label\" v-model=\"selectedRace\" return-object outlined @change=\"selectRace(true, true)\"></v-select>\n          </v-col>\n          <v-col v-if=\"selectedRace && selectedRace.variants\">\n            <v-select dense :items=\"selectedRace.variants\" label=\"Variantes\" item-text=\"label\" v-model=\"selectedSubrace\" return-object outlined @change=\"selectRace(true)\"></v-select>\n          </v-col>\n          <v-col v-if=\"race && race.freeAbilityBonuses\">\n            <v-select dense :items=\"abilityScoresChoices\" multiple label=\"Bonus aux caractéristiques\" v-model=\"abilityBonuses\" outlined @change=\"selectAbilityBonus\"></v-select>\n          </v-col>\n        </v-row>\n\n        <v-row>\n          <v-col>\n            <v-select dense :items=\"generationMethodChoices\" label=\"Méthode d'attribution\" v-model=\"generationMethod\" outlined @change=\"selectGenerationMethod\"></v-select>\n          </v-col>\n          <v-col>\n            <v-select dense :items=\"powerTiers\" return-object label=\"Niveau de puissance\" v-model=\"powerTier\" outlined :hint=\"hintPowerTier\" persistent-hint @change=\"selectPowerTier\"></v-select>\n          </v-col>\n        </v-row>\n\n        <v-row>\n          <v-col>\n            <v-simple-table>\n              <template v-slot:default>\n                <thead>\n                  <tr>\n                    <th class=\"text-center\">Caractéristique</th>\n                    <th class=\"text-center\">Base</th>\n                    <th class=\"text-center\"></th>\n                    <th class=\"text-center\">Bonus racial</th>\n                    <th class=\"text-center\"></th>\n                    <th class=\"text-center\"><strong>Total</strong></th>\n                    <th class=\"text-center\"><strong>Mod.</strong></th>\n                    <th v-if=\"generationMethod == 'pointBuy'\" class=\"text-center\">Coût</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr v-for=\"ability in abilityScores\" :key=\"ability.key\">\n                    <td class=\"text-center\"><span class=\"subtitle-2\">{{ ability.label }}</span></td>\n                    <td class=\"text-center ability-field\">\n                      <div v-if=\"generationMethod == 'pointBuy'\" class=\"d-flex align-center\">\n                        <v-text-field class=\"text-center\" readonly outlined hide-details dense :value=\"ability.value\">\n                          <template v-slot:prepend>\n                            <v-btn icon dense color=\"accent\" :disabled=\"ability.value <= powerTier.min\" @click.stop=\"ability.value--\"><v-icon>mdi-minus-circle</v-icon></v-btn>\n                          </template>\n                          <template v-slot:append-outer>\n                            <v-btn icon dense color=\"accent\" :disabled=\"ability.value >= powerTier.max\" @click.stop=\"ability.value++\"><v-icon>mdi-plus-circle</v-icon></v-btn>\n                          </template>\n                        </v-text-field>\n                      </div>\n                      <template v-else-if=\"generationMethod == 'standardArray'\">\n                        <v-select v-if=\"!ability.value\" dense :items=\"standardArrayValues\" v-model=\"ability.value\" outlined hide-details clearable @change=\"selectAbilityValue(ability)\"></v-select>\n                        <v-text-field v-else class=\"text-center\" outlined hide-details dense readonly clearable v-model=\"ability.value\"></v-text-field>\n                      </template>\n                    </td>\n                    <td class=\"text-center\">+</td>\n                    <td class=\"text-center\">{{ ability.racialBonus }}</td>\n                    <td class=\"text-center\">=</td>\n                    <td class=\"text-center\"><strong>{{ getTotal(ability) }}</strong></td>\n                    <td class=\"text-center\"><strong>{{ displayBonus(getModifier(getTotal(ability))) }}</strong></td>\n                    <td v-if=\"generationMethod == 'pointBuy'\" class=\"text-center\">{{ getAbilityScoreCost(ability) }}</td>\n                  </tr>\n                  <tr v-if=\"generationMethod == 'pointBuy' && powerTier\"><td class=\"text-right\" colspan=\"8\">Points restants : {{ pointsRemaining }}/{{ powerTier.pointBuy }}</td></tr>\n                </tbody>\n              </template>\n            </v-simple-table>\n          </v-col>\n        </v-row>\n      </v-col>\n    </v-row>\n  </div>\n</template>\n\n<script>\nimport { getModifier, displayBonus, displayAbilityScore } from '@theme/util/monsterHelpers'\nimport { ABILITYSCORECOSTS, ABILITYSCORES, POWERTIERS } from '../../data/abilityScores'\nimport { races } from '../../data/races'\n\nconst GENERATION_METHOD_CHOICES = [\n  { text: 'Méthode fixe', value: 'standardArray' },\n  { text: 'Méthode par répartition', value: 'pointBuy' }\n]\n\nexport default {\n  data () {\n    return {\n      generationMethodChoices: GENERATION_METHOD_CHOICES,\n      generationMethod: GENERATION_METHOD_CHOICES[1].value,\n      abilityScoreCosts: ABILITYSCORECOSTS,\n      powerTiers: POWERTIERS,\n      abilityScoresChoices: null,\n      races: races,\n      selectedSubrace: null,\n      selectedRace: null,\n      race: null,\n      powerTier: POWERTIERS[1],\n      abilityScores: [\n        { key: 'for', label: 'Force', value: 8, racialBonus: 0},\n        { key: 'dex', label: 'Dextérité', value: 8, racialBonus: 0},\n        { key: 'con', label: 'Constitution', value: 8, racialBonus: 0},\n        { key: 'int', label: 'Intelligence', value: 8, racialBonus: 0},\n        { key: 'sag', label: 'Sagesse', value: 8, racialBonus: 0},\n        { key: 'cha', label: 'Charisme', value: 8, racialBonus: 0}\n      ],\n      abilityBonuses: []\n    }\n  },\n\n  computed: {\n    hintPowerTier () {\n      if (this.generationMethod && this.powerTier) {\n        if (this.generationMethod == 'standardArray') {\n          return 'Valeurs fixes : ' + this.powerTier.standardArray\n        } else if (this.generationMethod == 'pointBuy') {\n          return 'Points disponibles : ' + this.powerTier.pointBuy\n        }\n      }\n      return ''\n    },\n\n    pointsRemaining () {\n      if (!this.powerTier) {\n        return 0\n      }\n      let pointSpent = 0\n      for (let ability of this.abilityScores) {\n        if (ABILITYSCORECOSTS[ability.value]) {\n          pointSpent += ABILITYSCORECOSTS[ability.value].cost\n        }\n      }\n      return this.powerTier.pointBuy - pointSpent\n    },\n\n    standardArrayValues () {\n      let values = Array.from(this.powerTier.standardArray)\n      for (let ability of this.abilityScores) {\n        if (ability.value) {\n          values.splice(values.indexOf(ability.value), 1)\n        }\n      }\n      return values\n    }\n  },\n\n  methods: {\n    getTotal (ability) {\n      let total = 0\n      if (!ability.value) {\n        return '--'\n      }\n      return parseInt(ability.value) + parseInt(ability.racialBonus)\n    },\n\n    getAbilityScoreCost (ability) {\n      if (ABILITYSCORECOSTS[ability.value]) {\n        return ABILITYSCORECOSTS[ability.value].cost\n      }\n      return null\n    },\n\n    getModifier (value) {\n      if (value == '--') {\n        return '--'\n      }\n      return getModifier(value)\n    },\n\n    displayBonus (score) {\n      return displayBonus(score)\n    },\n\n    selectRace (clearAbilities = false, clearSubrace = false) {\n      if (clearSubrace) {\n        this.selectedSubrace = null\n      }\n\n      if (this.selectedSubrace) {\n        this.race = this.selectedSubrace\n      } else {\n        this.race = this.selectedRace\n      }\n\n      for (let ability of this.abilityScores) {\n        ability.racialBonus = 0\n        if (this.race.abilityBonuses) {\n          for (var bonus of this.race.abilityBonuses) {\n            if (bonus.ability == ability.key) {\n              ability.racialBonus = bonus.value\n            }\n          }\n        }\n      }\n\n      if (clearAbilities) {\n        this.abilityBonuses = []\n      }\n\n      let choices = Array.from(ABILITYSCORES)\n      if (this.race && this.race.abilityBonuses) {\n        for (let abilityBonus of this.race.abilityBonuses) {\n          choices.splice(choices.findIndex(item => item.value == abilityBonus.key), 1)\n        }\n      }\n      this.abilityScoresChoices = choices\n    },\n\n    selectAbilityBonus (e) {\n      if(e.length > this.race.freeAbilityBonuses.qty) {\n        e.pop()\n      } else {\n        this.selectRace()\n        for (let bonus of this.abilityBonuses) {\n          this.abilityScores[this.abilityScores.findIndex(item => item.key == bonus)].racialBonus = this.race.freeAbilityBonuses.value\n        }\n      }\n    },\n\n    selectGenerationMethod () {\n      // Réinitialisation des valeurs au changement de la méthode d'attribution\n      if (this.generationMethod) {\n        if (this.generationMethod == 'pointBuy') {\n          for (let ability of this.abilityScores) {\n            ability.value = 8\n          }\n        } else if (this.generationMethod == 'standardArray') {\n          for (let ability of this.abilityScores) {\n            ability.value = null\n          }\n        }\n      }\n    },\n\n    selectPowerTier () {\n      if (this.generationMethod == 'standardArray') {\n        for (let ability of this.abilityScores) {\n          ability.value = null\n        }\n      }\n    },\n\n    selectAbilityValue (ability) {\n      // console.log(ability)\n    },\n\n    reset () {\n      this.selectedRace = null\n      this.selectedSubrace = null\n      this.race = null\n      this.generationMethod = GENERATION_METHOD_CHOICES[1].value\n      this.powerTier = POWERTIERS[1]\n      this.abilityScores = [\n        { key: 'for', label: 'Force', value: 8, racialBonus: 0},\n        { key: 'dex', label: 'Dextérité', value: 8, racialBonus: 0},\n        { key: 'con', label: 'Constitution', value: 8, racialBonus: 0},\n        { key: 'int', label: 'Intelligence', value: 8, racialBonus: 0},\n        { key: 'sag', label: 'Sagesse', value: 8, racialBonus: 0},\n        { key: 'cha', label: 'Charisme', value: 8, racialBonus: 0}\n      ]\n      this.abilityBonuses = []\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.v-input.text-center {\n  input {\n    text-align: center;\n  }\n}\n.ability-field {\n  width: 180px;\n  .v-input__prepend-outer, .v-input__append-outer {\n    margin-top: 0 !important;\n    margin-bottom: 0 !important;\n  }\n}\n</style>\n"]}]}