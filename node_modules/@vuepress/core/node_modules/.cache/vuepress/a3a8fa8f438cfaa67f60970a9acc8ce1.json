{"remainingRequest":"/home/olivier/Documents/douaratil-drs/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/olivier/Documents/douaratil-drs/docs/.vuepress/theme/layouts/CreateMagicItemLayout.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/olivier/Documents/douaratil-drs/docs/.vuepress/theme/layouts/CreateMagicItemLayout.vue","mtime":1640161622028},{"path":"/home/olivier/Documents/douaratil-drs/node_modules/cache-loader/dist/cjs.js","mtime":1640785878621},{"path":"/home/olivier/Documents/douaratil-drs/node_modules/babel-loader/lib/index.js","mtime":1640785878529},{"path":"/home/olivier/Documents/douaratil-drs/node_modules/cache-loader/dist/cjs.js","mtime":1640785878621},{"path":"/home/olivier/Documents/douaratil-drs/node_modules/vue-loader/lib/index.js","mtime":1640785880897}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBCcmVhZGNydW1iIGZyb20gJ0B0aGVtZS9jb21wb25lbnRzL0JyZWFkY3J1bWInCmltcG9ydCBNYWdpY0l0ZW0gZnJvbSAnQHRoZW1lL2NvbXBvbmVudHMvTWFnaWNJdGVtJwppbXBvcnQgTWFya2Rvd25Eb2MgZnJvbSAnQHRoZW1lL2NvbXBvbmVudHMvTWFya2Rvd25Eb2MnCmltcG9ydCB7IHNhdmVBcyB9IGZyb20gJ2ZpbGUtc2F2ZXInCmltcG9ydCB7IE1BR0lDSVRFTVRZUEVTLCBSQVJJVElFUyB9IGZyb20gJy4uLy4uL2RhdGEvbWFnaWNJdGVtcycKaW1wb3J0IHsgZ2V0VXJsUGFyYW1ldGVyIH0gZnJvbSAnQHRoZW1lL3V0aWwvZmlsdGVySGVscGVycycKaW1wb3J0IHsgZW5jb2RlIH0gZnJvbSAnQHRoZW1lL3V0aWwvaG9tZWJyZXcnCmltcG9ydCBzbHVnaWZ5IGZyb20gJ3NsdWdpZnknCnNsdWdpZnkuZXh0ZW5kKHsiJyI6ICctJ30pCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0NyZWF0ZU1hZ2ljSXRlbUxheW91dCcsCgogIGNvbXBvbmVudHM6IHsKICAgIEJyZWFkY3J1bWIsCiAgICBNYWdpY0l0ZW0sCiAgICBNYXJrZG93bkRvYwogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBpc01hZ2ljSXRlbUluVHJlYXN1cmVDaGVzdCAoKSB7CiAgICAgIGxldCBpc0luVHJlYXN1cmVDaGVzdCA9IGZhbHNlCiAgICAgIGZvciAobGV0IHMgb2YgdGhpcy4kc3RvcmUuc3RhdGUubXlNYWdpY0l0ZW1zLm1hZ2ljSXRlbXMpIHsKICAgICAgICBpZiAocy5rZXkgPT0gdGhpcy5tYWdpY0l0ZW0ua2V5KSB7CiAgICAgICAgICBpc0luVHJlYXN1cmVDaGVzdCA9IHRydWUKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGlzSW5UcmVhc3VyZUNoZXN0CiAgICB9LAoKICAgIGRpc3BsYXlUb2dnbGVNYWdpY0l0ZW1CdXR0b24gKCkgewogICAgICBpZiAodGhpcy5pc01hZ2ljSXRlbUluVHJlYXN1cmVDaGVzdCkgewogICAgICAgIHJldHVybiAnU3VwcHJpbWVyIGRlIG1lcyBvYmpldHMgbWFnaXF1ZXMnCiAgICAgIH0KICAgICAgcmV0dXJuICdBam91dGVyIMOgIG1lcyBvYmpldHMgbWFnaXF1ZXMnCiAgICB9LAoKICAgIGRpc3BsYXlBdHR1bmVtZW50ICgpIHsKICAgICAgaWYgKHRoaXMuY3VzdG9tQXR0dW5lbWVudCAhPT0gIiIpIHsKICAgICAgICByZXR1cm4gdGhpcy5jdXN0b21BdHR1bmVtZW50CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICdoYXJtb25pc2F0aW9uIHJlcXVpc2UnCiAgICAgIH0KICAgIH0KICB9LAoKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzVXBsb2FkaW5nOiBmYWxzZSwKICAgICAgdHlwZXM6IE1BR0lDSVRFTVRZUEVTLAogICAgICByYXJpdGllczogUkFSSVRJRVMsCiAgICAgIGN1c3RvbUF0dHVuZW1lbnQ6ICcnLAogICAgICBtYWdpY0l0ZW06IHsKICAgICAgICBjdXN0b206IHRydWUsCiAgICAgICAgcGlkOiAnbWFnaWNpdGVtJywKICAgICAgICBrZXk6IG51bGwsCiAgICAgICAgYXV0aG9yOiAnJywKICAgICAgICB0aXRsZTogJycsCiAgICAgICAgY29udGVudDogJycsCiAgICAgICAgaGFzQXR0dW5lbWVudDogZmFsc2UsCiAgICAgICAgZnJvbnRtYXR0ZXI6IHsKICAgICAgICAgIHR5cGU6ICcnLAogICAgICAgICAgc3VidHlwZTogJycsCiAgICAgICAgICByYXJpdHk6ICcnLAogICAgICAgICAgYXR0dW5lbWVudDogJycsCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKCiAgbWV0aG9kczogewogICAgZG93bmxvYWQgKCkgewogICAgICBsZXQgZmlsZW5hbWUgPSAib2JqZXQtbWFnaXF1ZS5qc29uIgogICAgICBpZiAodGhpcy5tYWdpY0l0ZW0udGl0bGUgIT09ICcnKSB7CiAgICAgICAgZmlsZW5hbWUgPSBzbHVnaWZ5KHRoaXMubWFnaWNJdGVtLnRpdGxlLCB7bG93ZXI6IHRydWUsIHN0cmljdDogdHJ1ZX0pICsgJy5qc29uJwogICAgICB9CiAgICAgIHNhdmVBcyhuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkodGhpcy5tYWdpY0l0ZW0pXSwgewogICAgICAgICAgdHlwZTogInRleHQvcGxhaW47Y2hhcnNldD11dGYtOCIKICAgICAgfSksIGZpbGVuYW1lKQogICAgfSwKCiAgICB1cGxvYWQgKGUpIHsKICAgICAgbGV0IGZpbGUgPSBlLnRhcmdldC5maWxlc1swXQogICAgICBpZiAoIWZpbGUpIHsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKQogICAgICBsZXQgc2VsZiA9IHRoaXMKCiAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgICBsZXQgcmVzdWx0ID0gSlNPTi5wYXJzZShyZWFkZXIucmVzdWx0KQogICAgICAgIGlmIChyZXN1bHQucGlkID09ICdtYWdpY2l0ZW0nKSB7CiAgICAgICAgICBzZWxmLm1hZ2ljSXRlbSA9IHJlc3VsdAogICAgICAgICAgc2VsZi4kc3RvcmUuY29tbWl0KCdzZXRTbmFja2JhclRleHQnLCAiTCdvYmpldCBtYWdpcXVlICIgKyBzZWxmLm1hZ2ljSXRlbS50aXRsZSArICIgYSDDqXTDqSBjaGFyZ8OpIikKICAgICAgICAgIHNlbGYuJHN0b3JlLmNvbW1pdCgnc2V0SXNPcGVuU25hY2tiYXInLCB0cnVlKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZWxmLiRzdG9yZS5jb21taXQoJ3NldFNuYWNrYmFyVGV4dCcsICJMZSBmaWNoaWVyIGVzdCBpbnZhbGlkZSIpCiAgICAgICAgICBzZWxmLiRzdG9yZS5jb21taXQoJ3NldElzT3BlblNuYWNrYmFyJywgdHJ1ZSkKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpCiAgICAgIHRoaXMuJHJlZnMudXBsb2FkZXIudmFsdWUgPSAnJwogICAgfSwKCiAgICBvblVwbG9hZENsaWNrICgpIHsKICAgICAgdGhpcy5pc1VwbG9hZGluZyA9IHRydWUKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKCkgPT4gewogICAgICAgIHRoaXMuaXNVcGxvYWRpbmcgPSBmYWxzZQogICAgICB9LCB7IG9uY2U6IHRydWUgfSkKCiAgICAgIHRoaXMuJHJlZnMudXBsb2FkZXIuY2xpY2soKQogICAgfSwKCiAgICBwcmludCAoKSB7CiAgICAgIHdpbmRvdy5wcmludCgpCiAgICB9LAoKICAgIHRvZ2dsZU1hZ2ljSXRlbUluVHJlYXN1cmVDaGVzdCAoKSB7CiAgICAgIGlmICh0aGlzLmlzTWFnaWNJdGVtSW5UcmVhc3VyZUNoZXN0KSB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdteU1hZ2ljSXRlbXMvcmVtb3ZlTWFnaWNJdGVtJywgdGhpcy5tYWdpY0l0ZW0pCiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRTbmFja2JhclRleHQnLCAiTCdvYmpldCBtYWdpcXVlICIgKyB0aGlzLm1hZ2ljSXRlbS50aXRsZSArICIgYSDDqXTDqSBzdXBwcmltw6kgZGUgdm90cmUgYmlibGlvdGjDqHF1ZSIpCiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRJc09wZW5TbmFja2JhcicsIHRydWUpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdteU1hZ2ljSXRlbXMvYWRkTWFnaWNJdGVtJywgdGhpcy5tYWdpY0l0ZW0pCiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRTbmFja2JhclRleHQnLCAiTCdvYmpldCBtYWdpcXVlICIgKyB0aGlzLm1hZ2ljSXRlbS50aXRsZSArICIgYSDDqXTDqSBham91dMOpIMOgIHZvdHJlIGJpYmxpb3Row6hxdWUiKQogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0SXNPcGVuU25hY2tiYXInLCB0cnVlKQogICAgICB9CiAgICB9LAoKICAgIHVwZGF0ZU1hZ2ljSXRlbUluVHJlYXN1cmVDaGVzdCAoKSB7CiAgICAgIGlmICh0aGlzLmlzTWFnaWNJdGVtSW5UcmVhc3VyZUNoZXN0KSB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdteU1hZ2ljSXRlbXMvdXBkYXRlTWFnaWNJdGVtJywgdGhpcy5tYWdpY0l0ZW0pCiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRTbmFja2JhclRleHQnLCAiTCdvYmpldCBtYWdpcXVlIGEgw6l0w6kgbWlzIMOgIGpvdXIgZGFucyB2b3RyZSBiaWJsaW90aMOocXVlIikKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldElzT3BlblNuYWNrYmFyJywgdHJ1ZSkKICAgICAgfQogICAgfSwKCiAgICBzd2l0Y2hBdHR1bmVtZW50ICgpIHsKICAgICAgaWYgKHRoaXMubWFnaWNJdGVtLmhhc0F0dHVuZW1lbnQpIHsKICAgICAgICB0aGlzLm1hZ2ljSXRlbS5mcm9udG1hdHRlci5hdHR1bmVtZW50ID0gImhhcm1vbmlzYXRpb24gcmVxdWlzZSIKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm1hZ2ljSXRlbS5mcm9udG1hdHRlci5hdHR1bmVtZW50ID0gIiIKICAgICAgfQogICAgfSwKCiAgICByZXNldCAoKSB7CiAgICAgIHRoaXMuY3VzdG9tQXR0dW5lbWVudCA9ICcnLAogICAgICB0aGlzLm1hZ2ljSXRlbSA9IHsKICAgICAgICBjdXN0b206IHRydWUsCiAgICAgICAgcGlkOiAnbWFnaWNJdGVtJywKICAgICAgICBrZXk6IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KSwKICAgICAgICBhdXRob3I6ICcnLAogICAgICAgIHRpdGxlOiAnJywKICAgICAgICBjb250ZW50OiAnJywKICAgICAgICBoYXNBdHR1bmVtZW50OiBmYWxzZSwKICAgICAgICBmcm9udG1hdHRlcjogewogICAgICAgICAgdHlwZTogJycsCiAgICAgICAgICBzdWJ0eXBlOiAnJywKICAgICAgICAgIHJhcml0eTogJycsCiAgICAgICAgICBhdHR1bmVtZW50OiAnJywKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgc2hhcmUgKCkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldFNoYXJlVVJJJywgZW5jb2RlKHRoaXMubWFnaWNJdGVtKSkKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRJc09wZW5TaGFyZUhvbWVicmV3RGlhbG9nJywgdHJ1ZSkKICAgIH0KICB9LAoKICBtb3VudGVkICgpIHsKICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0SGFzUmlnaHREcmF3ZXInLCBmYWxzZSkKICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0UmlnaHREcmF3ZXInLCB0aGlzLiR2dWV0aWZ5LmJyZWFrcG9pbnQubGdBbmRVcCkKICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0SW5SaWdodERyYXdlcicsIG51bGwpCgogICAgdGhpcy4kcGFnZS50aXRsZSA9ICJDcsOpYXRpb24gZCdvYmpldCBtYWdpcXVlIgoKICAgIGxldCBtYWdpY0l0ZW1LZXkgPSBnZXRVcmxQYXJhbWV0ZXIod2luZG93LmxvY2F0aW9uLmhyZWYsICJrZXkiKQoKICAgIGlmIChtYWdpY0l0ZW1LZXkpIHsKICAgICAgZm9yIChsZXQgbWFnaWNJdGVtIG9mIHRoaXMuJHN0b3JlLnN0YXRlLm15TWFnaWNJdGVtcy5tYWdpY0l0ZW1zKSB7CiAgICAgICAgaWYgKG1hZ2ljSXRlbS5rZXkgPT0gbWFnaWNJdGVtS2V5KSB7CiAgICAgICAgICB0aGlzLm1hZ2ljSXRlbSA9IG1hZ2ljSXRlbQogICAgICAgICAgaWYgKCF0aGlzLm1hZ2ljSXRlbS5jdXN0b20pIHsKICAgICAgICAgICAgdGhpcy5tYWdpY0l0ZW0uY29udGVudCA9IG1hZ2ljSXRlbS5yYXdDb250ZW50CiAgICAgICAgICAgIHRoaXMubWFnaWNJdGVtLmN1c3RvbSA9IHRydWUKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHRoaXMubWFnaWNJdGVtLmtleSA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KQogICAgfQogIH0KfQo="},{"version":3,"sources":["CreateMagicItemLayout.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreateMagicItemLayout.vue","sourceRoot":"docs/.vuepress/theme/layouts","sourcesContent":["<template>\n  <div class=\"create-magic-item\">\n    <div class=\"d-flex flex-wrap align-center d-print-none\">\n      <Breadcrumb class=\"mr-auto mb-4\" />\n\n    </div>\n\n    <h1 class=\"d-print-none\">Cr√©ation d'objet magique</h1>\n\n    <div class=\"my-4 d-flex flex-wrap d-print-none\">\n      <v-btn outlined color=\"accent\" class=\"mr-1 mb-1\" depressed @click=\"print\"><v-icon>mdi-printer</v-icon> Imprimer</v-btn>\n      <v-btn outlined color=\"accent\" class=\"mr-1 mb-1\" depressed @click=\"download\"><v-icon>mdi-file-download</v-icon> Sauvegarder</v-btn>\n      <v-btn outlined color=\"accent\" class=\"mr-1 mb-1\" depressed :loading=\"isUploading\" @click=\"onUploadClick\">\n        <v-icon left>mdi-file-upload</v-icon> Charger\n      </v-btn>\n      <input ref=\"uploader\" class=\"d-none\" type=\"file\" @change=\"upload\">\n      <v-btn :outlined=\"!isMagicItemInTreasureChest\" color=\"accent\" class=\"mr-1 mb-1\" depressed @click=\"toggleMagicItemInTreasureChest\"><v-icon>mdi-book</v-icon> {{ displayToggleMagicItemButton }}</v-btn>\n      <v-btn :disabled=\"!isMagicItemInTreasureChest\" outlined color=\"accent\" class=\"mr-1 mb-1\" depressed @click=\"updateMagicItemInTreasureChest\"><v-icon>mdi-update</v-icon> M√†J dans le grimoire</v-btn>\n      <v-btn outlined color=\"error\" class=\"mr-1 mb-1\" depressed @click=\"reset\"><v-icon>mdi-eraser</v-icon> R√©initialiser</v-btn>\n      <v-btn outlined class=\"mb-1\" depressed @click=\"share\"><v-icon left>mdi-share-variant</v-icon> Partager</v-btn>\n    </div>\n\n    <v-row>\n      <v-col class=\"d-print-none\" :cols=\"12\" :md=\"6\">\n\n        <v-row>\n          <v-col :cols=\"12\" :sm=\"4\">\n            <v-text-field label=\"Nom\" outlined dense v-model=\"magicItem.title\"></v-text-field>\n          </v-col>\n          <v-col :cols=\"12\" :sm=\"4\">\n            <v-select :items=\"types\" label=\"Type\" outlined dense v-model=\"magicItem.frontmatter.type\"></v-select>\n          </v-col>\n          <v-col :cols=\"12\" :sm=\"4\">\n            <v-select :items=\"rarities\" label=\"Raret√©\" outlined dense v-model=\"magicItem.frontmatter.rarity\"></v-select>\n          </v-col>\n        </v-row>\n\n        <v-row>\n          <v-col>\n            <v-text-field label=\"Sous-type\" outlined dense v-model=\"magicItem.frontmatter.subtype\"></v-text-field>\n          </v-col>\n          <v-col>\n            <v-switch class=\"my-0\" v-model=\"magicItem.hasAttunement\" label=\"Harmonisation\" @change=\"switchAttunement\" dense></v-switch>\n          </v-col>\n          <v-col v-if=\"magicItem.hasAttunement\">\n            <v-text-field label=\"Type d'armonisation\" outlined dense v-model=\"magicItem.frontmatter.attunement\"></v-text-field>\n          </v-col>\n        </v-row>\n\n        <v-row>\n          <v-col>\n            <v-textarea outlined label=\"Description\" v-model=\"magicItem.content\" hide-details></v-textarea>\n            <MarkdownDoc />\n          </v-col>\n        </v-row>\n\n        <v-row>\n          <v-col>\n            <v-text-field outlined label=\"Auteur\" v-model=\"magicItem.author\"></v-text-field>\n          </v-col>\n        </v-row>\n\n      </v-col>\n\n      <v-col :col=\"6\">\n        <MagicItem :magicItem=\"magicItem\" />\n      </v-col>\n    </v-row>\n  </div>\n</template>\n\n<script>\nimport Breadcrumb from '@theme/components/Breadcrumb'\nimport MagicItem from '@theme/components/MagicItem'\nimport MarkdownDoc from '@theme/components/MarkdownDoc'\nimport { saveAs } from 'file-saver'\nimport { MAGICITEMTYPES, RARITIES } from '../../data/magicItems'\nimport { getUrlParameter } from '@theme/util/filterHelpers'\nimport { encode } from '@theme/util/homebrew'\nimport slugify from 'slugify'\nslugify.extend({\"'\": '-'})\n\nexport default {\n  name: 'CreateMagicItemLayout',\n\n  components: {\n    Breadcrumb,\n    MagicItem,\n    MarkdownDoc\n  },\n\n  computed: {\n    isMagicItemInTreasureChest () {\n      let isInTreasureChest = false\n      for (let s of this.$store.state.myMagicItems.magicItems) {\n        if (s.key == this.magicItem.key) {\n          isInTreasureChest = true\n        }\n      }\n      return isInTreasureChest\n    },\n\n    displayToggleMagicItemButton () {\n      if (this.isMagicItemInTreasureChest) {\n        return 'Supprimer de mes objets magiques'\n      }\n      return 'Ajouter √† mes objets magiques'\n    },\n\n    displayAttunement () {\n      if (this.customAttunement !== \"\") {\n        return this.customAttunement\n      } else {\n        return 'harmonisation requise'\n      }\n    }\n  },\n\n  data () {\n    return {\n      isUploading: false,\n      types: MAGICITEMTYPES,\n      rarities: RARITIES,\n      customAttunement: '',\n      magicItem: {\n        custom: true,\n        pid: 'magicitem',\n        key: null,\n        author: '',\n        title: '',\n        content: '',\n        hasAttunement: false,\n        frontmatter: {\n          type: '',\n          subtype: '',\n          rarity: '',\n          attunement: '',\n        }\n      }\n    }\n  },\n\n  methods: {\n    download () {\n      let filename = \"objet-magique.json\"\n      if (this.magicItem.title !== '') {\n        filename = slugify(this.magicItem.title, {lower: true, strict: true}) + '.json'\n      }\n      saveAs(new Blob([JSON.stringify(this.magicItem)], {\n          type: \"text/plain;charset=utf-8\"\n      }), filename)\n    },\n\n    upload (e) {\n      let file = e.target.files[0]\n      if (!file) {\n        return\n      }\n      let reader = new FileReader()\n      let self = this\n\n      reader.onload = function() {\n        let result = JSON.parse(reader.result)\n        if (result.pid == 'magicitem') {\n          self.magicItem = result\n          self.$store.commit('setSnackbarText', \"L'objet magique \" + self.magicItem.title + \" a √©t√© charg√©\")\n          self.$store.commit('setIsOpenSnackbar', true)\n        } else {\n          self.$store.commit('setSnackbarText', \"Le fichier est invalide\")\n          self.$store.commit('setIsOpenSnackbar', true)\n        }\n      }\n\n      reader.readAsText(file)\n      this.$refs.uploader.value = ''\n    },\n\n    onUploadClick () {\n      this.isUploading = true\n      window.addEventListener('focus', () => {\n        this.isUploading = false\n      }, { once: true })\n\n      this.$refs.uploader.click()\n    },\n\n    print () {\n      window.print()\n    },\n\n    toggleMagicItemInTreasureChest () {\n      if (this.isMagicItemInTreasureChest) {\n        this.$store.commit('myMagicItems/removeMagicItem', this.magicItem)\n        this.$store.commit('setSnackbarText', \"L'objet magique \" + this.magicItem.title + \" a √©t√© supprim√© de votre biblioth√®que\")\n        this.$store.commit('setIsOpenSnackbar', true)\n      } else {\n        this.$store.commit('myMagicItems/addMagicItem', this.magicItem)\n        this.$store.commit('setSnackbarText', \"L'objet magique \" + this.magicItem.title + \" a √©t√© ajout√© √† votre biblioth√®que\")\n        this.$store.commit('setIsOpenSnackbar', true)\n      }\n    },\n\n    updateMagicItemInTreasureChest () {\n      if (this.isMagicItemInTreasureChest) {\n        this.$store.commit('myMagicItems/updateMagicItem', this.magicItem)\n        this.$store.commit('setSnackbarText', \"L'objet magique a √©t√© mis √† jour dans votre biblioth√®que\")\n        this.$store.commit('setIsOpenSnackbar', true)\n      }\n    },\n\n    switchAttunement () {\n      if (this.magicItem.hasAttunement) {\n        this.magicItem.frontmatter.attunement = \"harmonisation requise\"\n      } else {\n        this.magicItem.frontmatter.attunement = \"\"\n      }\n    },\n\n    reset () {\n      this.customAttunement = '',\n      this.magicItem = {\n        custom: true,\n        pid: 'magicItem',\n        key: Math.random().toString(36).substr(2, 9),\n        author: '',\n        title: '',\n        content: '',\n        hasAttunement: false,\n        frontmatter: {\n          type: '',\n          subtype: '',\n          rarity: '',\n          attunement: '',\n        }\n      }\n    },\n\n    share () {\n      this.$store.commit('setShareURI', encode(this.magicItem))\n      this.$store.commit('setIsOpenShareHomebrewDialog', true)\n    }\n  },\n\n  mounted () {\n    this.$store.commit('setHasRightDrawer', false)\n    this.$store.commit('setRightDrawer', this.$vuetify.breakpoint.lgAndUp)\n    this.$store.commit('setInRightDrawer', null)\n\n    this.$page.title = \"Cr√©ation d'objet magique\"\n\n    let magicItemKey = getUrlParameter(window.location.href, \"key\")\n\n    if (magicItemKey) {\n      for (let magicItem of this.$store.state.myMagicItems.magicItems) {\n        if (magicItem.key == magicItemKey) {\n          this.magicItem = magicItem\n          if (!this.magicItem.custom) {\n            this.magicItem.content = magicItem.rawContent\n            this.magicItem.custom = true\n          }\n        }\n      }\n    } else {\n      this.magicItem.key = Math.random().toString(36).substr(2, 9)\n    }\n  }\n}\n</script>\n\n<style>\n</style>\n"]}]}