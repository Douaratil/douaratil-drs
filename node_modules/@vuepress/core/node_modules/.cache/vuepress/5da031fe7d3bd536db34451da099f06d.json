{"remainingRequest":"/home/olivier/Documents/douaratil-drs/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/olivier/Documents/douaratil-drs/docs/.vuepress/theme/components/search/SRDSearchBox.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/olivier/Documents/douaratil-drs/docs/.vuepress/theme/components/search/SRDSearchBox.vue","mtime":1634294763185},{"path":"/home/olivier/Documents/douaratil-drs/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/olivier/Documents/douaratil-drs/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/olivier/Documents/douaratil-drs/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/olivier/Documents/douaratil-drs/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBtYXRjaFF1ZXJ5IGZyb20gJy4vbWF0Y2gtcXVlcnknCmltcG9ydCBzbHVnaWZ5IGZyb20gJ3NsdWdpZnknCmltcG9ydCB7IGRpc3BsYXlTY2hvb2xMZXZlbCB9IGZyb20gJ0B0aGVtZS91dGlsL3NwZWxsSGVscGVycycKaW1wb3J0IHsgZGlzcGxheUl0ZW1NZXRhIH0gZnJvbSAnQHRoZW1lL3V0aWwvbWFnaWNJdGVtSGVscGVycycKaW1wb3J0IHsgZGlzcGxheU1vbnN0ZXJUeXBlU2l6ZUFsaWdubWVudCB9IGZyb20gJ0B0aGVtZS91dGlsL21vbnN0ZXJIZWxwZXJzJwoKLyogZ2xvYmFsIFNFQVJDSF9NQVhfU1VHR0VTVElPTlMsIFNFQVJDSF9QQVRIUywgU0VBUkNIX0hPVEtFWVMgKi8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdTUkRTZWFyY2hCb3gnLAoKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBmb2N1c2VkOiBmYWxzZSwKICAgICAgZm9jdXNJbmRleDogMCwKICAgICAgcGxhY2Vob2xkZXI6IHVuZGVmaW5lZCwKICAgICAgc2VhcmNoOiBudWxsLAogICAgICBzZWxlY3Q6IG51bGwsCiAgICAgIGl0ZW1zOiBbXQogICAgfQogIH0sCgogIHdhdGNoOiB7CiAgICBzZWFyY2ggKHF1ZXJ5KSB7CiAgICAgIGlmIChxdWVyeSAmJiBxdWVyeS5sZW5ndGggPiAxKSB7CiAgICAgICAgdGhpcy5zdWdnZXN0aW9ucyhxdWVyeSkKICAgICAgfQogICAgfSwKCiAgICBzZWxlY3QgKHNlbGVjdGVkKSB7CiAgICAgIHRoaXMuZ28oc2VsZWN0ZWQpCiAgICB9CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIGVudHJpZXMgKCkgewogICAgICByZXR1cm4gdGhpcy5pdGVtcy5tYXAoaXRlbSA9PiB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHRpdGxlOiBpdGVtLnRpdGxlLAogICAgICAgICAgc3VidGl0bGU6IGl0ZW0uc3VidGl0bGUsCiAgICAgICAgICBwYXRoOiBpdGVtLnBhdGgKICAgICAgICB9CiAgICAgIH0pCiAgICB9CiAgfSwKCiAgbW91bnRlZCAoKSB7CiAgICB0aGlzLnBsYWNlaG9sZGVyID0gdGhpcy4kc2l0ZS50aGVtZUNvbmZpZy5zZWFyY2hQbGFjZWhvbGRlciB8fCAnJwogIH0sCgogIG1ldGhvZHM6IHsKICAgIHNlYXJjaEZpbHRlciAoaXRlbSwgcXVlcnlUZXh0LCBpdGVtVGV4dCkgewogICAgICBpZiAoc2x1Z2lmeShpdGVtVGV4dCwge2xvd2VyOiB0cnVlLCBzdHJpY3Q6IHRydWV9KS5pbmNsdWRlcyhzbHVnaWZ5KHF1ZXJ5VGV4dCwge2xvd2VyOiB0cnVlLCBzdHJpY3Q6IHRydWV9KSkpIHsKICAgICAgICByZXR1cm4gdHJ1ZQogICAgICB9CiAgICAgIHJldHVybiBmYWxzZQogICAgfSwKCgogICAgc3VnZ2VzdGlvbnMgKHF1ZXJ5KSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWUKICAgICAgcXVlcnkgPSBxdWVyeS50cmltKCkudG9Mb3dlckNhc2UoKQogICAgICBpZiAoIXF1ZXJ5KSB7CiAgICAgICAgdGhpcy5pdGVtcyA9IFtdCiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIGNvbnN0IHsgcGFnZXMgfSA9IHRoaXMuJHNpdGUKICAgICAgY29uc3QgbWF4ID0gdGhpcy4kc2l0ZS50aGVtZUNvbmZpZy5zZWFyY2hNYXhTdWdnZXN0aW9ucyB8fCAxMAogICAgICBjb25zdCBsb2NhbGVQYXRoID0gdGhpcy4kbG9jYWxlUGF0aAogICAgICBjb25zdCByZXMgPSBbXQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhZ2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHJlcy5sZW5ndGggPj0gbWF4KSBicmVhawogICAgICAgIGNvbnN0IHAgPSBwYWdlc1tpXQogICAgICAgIC8vIGZpbHRlciBvdXQgcmVzdWx0cyB0aGF0IGRvIG5vdCBtYXRjaCBjdXJyZW50IGxvY2FsZQogICAgICAgIGlmICh0aGlzLmdldFBhZ2VMb2NhbGVQYXRoKHApICE9PSBsb2NhbGVQYXRoKSB7CiAgICAgICAgICBjb250aW51ZQogICAgICAgIH0KCiAgICAgICAgLy8gZmlsdGVyIG91dCByZXN1bHRzIHRoYXQgZG8gbm90IG1hdGNoIHNlYXJjaGFibGUgcGF0aHMKICAgICAgICBpZiAoIXRoaXMuaXNTZWFyY2hhYmxlKHApKSB7CiAgICAgICAgICBjb250aW51ZQogICAgICAgIH0KCiAgICAgICAgaWYgKG1hdGNoUXVlcnkocXVlcnksIHApKSB7CiAgICAgICAgICBpZiAocC5waWQgJiYgcC5waWQgPT0gJ3NwZWxsJykgewogICAgICAgICAgICByZXMucHVzaChPYmplY3QuYXNzaWduKHt9LCBwLCB7CiAgICAgICAgICAgICAgc3VidGl0bGU6IGRpc3BsYXlTY2hvb2xMZXZlbChwLmZyb250bWF0dGVyKSwKICAgICAgICAgICAgICB0aXRsZTogcC50aXRsZSwKICAgICAgICAgICAgICBwYXRoOiBwLnBhdGgKICAgICAgICAgICAgfSkpCiAgICAgICAgICB9IGVsc2UgaWYgKHAucGlkICYmIHAucGlkID09ICdtYWdpY2l0ZW0nKSB7CiAgICAgICAgICAgIHJlcy5wdXNoKE9iamVjdC5hc3NpZ24oe30sIHAsIHsKICAgICAgICAgICAgICBzdWJ0aXRsZTogZGlzcGxheUl0ZW1NZXRhKHAuZnJvbnRtYXR0ZXIsIHRydWUpLAogICAgICAgICAgICAgIHRpdGxlOiBwLnRpdGxlLAogICAgICAgICAgICAgIHBhdGg6IHAucGF0aAogICAgICAgICAgICB9KSkKICAgICAgICAgIH0gZWxzZSBpZiAocC5waWQgJiYgcC5waWQgPT0gJ21vbnN0ZXInKSB7CiAgICAgICAgICAgIHJlcy5wdXNoKE9iamVjdC5hc3NpZ24oe30sIHAsIHsKICAgICAgICAgICAgICBzdWJ0aXRsZTogZGlzcGxheU1vbnN0ZXJUeXBlU2l6ZUFsaWdubWVudChwLmZyb250bWF0dGVyLCB0cnVlLCBmYWxzZSksCiAgICAgICAgICAgICAgdGl0bGU6IHAudGl0bGUsCiAgICAgICAgICAgICAgcGF0aDogcC5wYXRoCiAgICAgICAgICAgIH0pKQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzLnB1c2gocCkKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHAuaGVhZGVycyAmJiBwLnBpZCAhPSAnbW9uc3RlcicpIHsgLy8gT25seSBwYXJzZSByZWxldmVudCBoZWFkZXJzLiBNb25zdGVyIGhlYWRlcnMgYXJlIG5vdAogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBwLmhlYWRlcnMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgaWYgKHJlcy5sZW5ndGggPj0gbWF4KSBicmVhawogICAgICAgICAgICBjb25zdCBoID0gcC5oZWFkZXJzW2pdCiAgICAgICAgICAgIGlmIChoLnRpdGxlICYmIG1hdGNoUXVlcnkocXVlcnksIHAsIGgudGl0bGUpKSB7CiAgICAgICAgICAgICAgcmVzLnB1c2goT2JqZWN0LmFzc2lnbih7fSwgcCwgewogICAgICAgICAgICAgICAgc3VidGl0bGU6IHAudGl0bGUsCiAgICAgICAgICAgICAgICB0aXRsZTogaC50aXRsZSwKICAgICAgICAgICAgICAgIHBhdGg6IHAucGF0aCArICcjJyArIGguc2x1ZywKICAgICAgICAgICAgICAgIGhlYWRlcjogaAogICAgICAgICAgICAgIH0pKQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMuaXRlbXMgPSByZXMKICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgIH0sCgogICAgZ2V0UGFnZUxvY2FsZVBhdGggKHBhZ2UpIHsKICAgICAgZm9yIChjb25zdCBsb2NhbGVQYXRoIGluIHRoaXMuJHNpdGUubG9jYWxlcyB8fCB7fSkgewogICAgICAgIGlmIChsb2NhbGVQYXRoICE9PSAnLycgJiYgcGFnZS5wYXRoLmluZGV4T2YobG9jYWxlUGF0aCkgPT09IDApIHsKICAgICAgICAgIHJldHVybiBsb2NhbGVQYXRoCiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiAnLycKICAgIH0sCgogICAgaXNTZWFyY2hhYmxlIChwYWdlKSB7CiAgICAgIGxldCBzZWFyY2hQYXRocyA9IHRoaXMuJHNpdGUudGhlbWVDb25maWcuc2VhcmNoUGF0aHMgfHwgbnVsbAoKICAgICAgLy8gYWxsIHBhdGhzIHNlYXJjaGFibGVzCiAgICAgIGlmIChzZWFyY2hQYXRocyA9PT0gbnVsbCkgeyByZXR1cm4gdHJ1ZSB9CgogICAgICBzZWFyY2hQYXRocyA9IEFycmF5LmlzQXJyYXkoc2VhcmNoUGF0aHMpID8gc2VhcmNoUGF0aHMgOiBuZXcgQXJyYXkoc2VhcmNoUGF0aHMpCgogICAgICByZXR1cm4gc2VhcmNoUGF0aHMuZmlsdGVyKHBhdGggPT4gewogICAgICAgIHJldHVybiBwYWdlLnBhdGgubWF0Y2gocGF0aCkKICAgICAgfSkubGVuZ3RoID4gMAogICAgfSwKCiAgICBnbyAoc2VsZWN0ZWQpIHsKICAgICAgaWYgKHNlbGVjdGVkKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goc2VsZWN0ZWQucGF0aCkKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["SRDSearchBox.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SRDSearchBox.vue","sourceRoot":"docs/.vuepress/theme/components/search","sourcesContent":["<template>\n  <v-autocomplete\n    v-model=\"select\"\n    :loading=\"loading\"\n    :items=\"entries\"\n    :search-input.sync=\"search\"\n    cache-items\n    class=\"mx-4\"\n    flat\n    clearable\n    hide-no-data\n    hide-details\n    item-text=\"title\"\n    item-value=\"path\"\n    :label=\"placeholder\"\n    append-icon=\"mdi-magnify\"\n    solo-inverted\n    return-object\n    :filter=\"searchFilter\"\n  >\n\n    <template v-slot:item=\"data\">\n      <template>\n        <v-list-item-content>\n          <v-list-item-title v-html=\"data.item.title\"></v-list-item-title>\n          <v-list-item-subtitle v-if=\"data.item.subtitle\" v-html=\"data.item.subtitle\"></v-list-item-subtitle>\n        </v-list-item-content>\n      </template>\n    </template>\n\n  </v-autocomplete>\n</template>\n\n<script>\nimport matchQuery from './match-query'\nimport slugify from 'slugify'\nimport { displaySchoolLevel } from '@theme/util/spellHelpers'\nimport { displayItemMeta } from '@theme/util/magicItemHelpers'\nimport { displayMonsterTypeSizeAlignment } from '@theme/util/monsterHelpers'\n\n/* global SEARCH_MAX_SUGGESTIONS, SEARCH_PATHS, SEARCH_HOTKEYS */\nexport default {\n  name: 'SRDSearchBox',\n\n  data () {\n    return {\n      loading: false,\n      focused: false,\n      focusIndex: 0,\n      placeholder: undefined,\n      search: null,\n      select: null,\n      items: []\n    }\n  },\n\n  watch: {\n    search (query) {\n      if (query && query.length > 1) {\n        this.suggestions(query)\n      }\n    },\n\n    select (selected) {\n      this.go(selected)\n    }\n  },\n\n  computed: {\n    entries () {\n      return this.items.map(item => {\n        return {\n          title: item.title,\n          subtitle: item.subtitle,\n          path: item.path\n        }\n      })\n    }\n  },\n\n  mounted () {\n    this.placeholder = this.$site.themeConfig.searchPlaceholder || ''\n  },\n\n  methods: {\n    searchFilter (item, queryText, itemText) {\n      if (slugify(itemText, {lower: true, strict: true}).includes(slugify(queryText, {lower: true, strict: true}))) {\n        return true\n      }\n      return false\n    },\n\n\n    suggestions (query) {\n      this.loading = true\n      query = query.trim().toLowerCase()\n      if (!query) {\n        this.items = []\n        return\n      }\n\n      const { pages } = this.$site\n      const max = this.$site.themeConfig.searchMaxSuggestions || 10\n      const localePath = this.$localePath\n      const res = []\n      for (let i = 0; i < pages.length; i++) {\n        if (res.length >= max) break\n        const p = pages[i]\n        // filter out results that do not match current locale\n        if (this.getPageLocalePath(p) !== localePath) {\n          continue\n        }\n\n        // filter out results that do not match searchable paths\n        if (!this.isSearchable(p)) {\n          continue\n        }\n\n        if (matchQuery(query, p)) {\n          if (p.pid && p.pid == 'spell') {\n            res.push(Object.assign({}, p, {\n              subtitle: displaySchoolLevel(p.frontmatter),\n              title: p.title,\n              path: p.path\n            }))\n          } else if (p.pid && p.pid == 'magicitem') {\n            res.push(Object.assign({}, p, {\n              subtitle: displayItemMeta(p.frontmatter, true),\n              title: p.title,\n              path: p.path\n            }))\n          } else if (p.pid && p.pid == 'monster') {\n            res.push(Object.assign({}, p, {\n              subtitle: displayMonsterTypeSizeAlignment(p.frontmatter, true, false),\n              title: p.title,\n              path: p.path\n            }))\n          } else {\n            res.push(p)\n          }\n        } else if (p.headers && p.pid != 'monster') { // Only parse relevent headers. Monster headers are not\n          for (let j = 0; j < p.headers.length; j++) {\n            if (res.length >= max) break\n            const h = p.headers[j]\n            if (h.title && matchQuery(query, p, h.title)) {\n              res.push(Object.assign({}, p, {\n                subtitle: p.title,\n                title: h.title,\n                path: p.path + '#' + h.slug,\n                header: h\n              }))\n            }\n          }\n        }\n      }\n      this.items = res\n      this.loading = false\n    },\n\n    getPageLocalePath (page) {\n      for (const localePath in this.$site.locales || {}) {\n        if (localePath !== '/' && page.path.indexOf(localePath) === 0) {\n          return localePath\n        }\n      }\n      return '/'\n    },\n\n    isSearchable (page) {\n      let searchPaths = this.$site.themeConfig.searchPaths || null\n\n      // all paths searchables\n      if (searchPaths === null) { return true }\n\n      searchPaths = Array.isArray(searchPaths) ? searchPaths : new Array(searchPaths)\n\n      return searchPaths.filter(path => {\n        return page.path.match(path)\n      }).length > 0\n    },\n\n    go (selected) {\n      if (selected) {\n        this.$router.push(selected.path)\n      }\n    }\n  }\n}\n</script>\n\n<style>\n</style>\n"]}]}