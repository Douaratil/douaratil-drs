{"remainingRequest":"/home/olivier/Documents/douaratil-drs/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/olivier/Documents/douaratil-drs/docs/.vuepress/theme/layouts/MyMagicItemsLayout.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/olivier/Documents/douaratil-drs/docs/.vuepress/theme/layouts/MyMagicItemsLayout.vue","mtime":1634294763189},{"path":"/home/olivier/Documents/douaratil-drs/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/olivier/Documents/douaratil-drs/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/olivier/Documents/douaratil-drs/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/olivier/Documents/douaratil-drs/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBCcmVhZGNydW1iIGZyb20gJ0B0aGVtZS9jb21wb25lbnRzL0JyZWFkY3J1bWInCmltcG9ydCBNeU1hZ2ljSXRlbXMgZnJvbSAnQHRoZW1lL2NvbXBvbmVudHMvTXlNYWdpY0l0ZW1zJwppbXBvcnQgeyBzYXZlQXMgfSBmcm9tICdmaWxlLXNhdmVyJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdNeU1hZ2ljSXRlbXNMYXlvdXQnLAoKICBjb21wb25lbnRzOiB7CiAgICBCcmVhZGNydW1iLAogICAgTXlNYWdpY0l0ZW1zCiAgfSwKCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBpc1VwbG9hZGluZzogZmFsc2UsCiAgICAgIGNvbmZpcm1EZWxldGVEaWFsb2c6IGZhbHNlLAogICAgICBhbGVydE9wZW46IGZhbHNlLAogICAgICBhbGVydFRleHQ6IG51bGwsCiAgICAgIGFsZXJ0VHlwZTogImluZm8iCiAgICB9CiAgfSwKCiAgbWV0aG9kczogewogICAgZG93bmxvYWQgKCkgewogICAgICBzYXZlQXMobmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KHRoaXMuJHN0b3JlLnN0YXRlLm15TWFnaWNJdGVtcyldLCB7CiAgICAgICAgICB0eXBlOiAidGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04IgogICAgICB9KSwgIm9iamV0cy1tYWdpcXVlcy5qc29uIikKICAgIH0sCgogICAgdXBsb2FkIChlKSB7CiAgICAgIGxldCBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF0KICAgICAgY29uc29sZS5sb2coZmlsZSkKICAgICAgaWYgKCFmaWxlKSB7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgbGV0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCkKICAgICAgbGV0IHNlbGYgPSB0aGlzCgogICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgbGV0IHJlc3VsdCA9IEpTT04ucGFyc2UocmVhZGVyLnJlc3VsdCkKICAgICAgICBsZXQgaXNWYWxpZCA9IHRydWUKICAgICAgICBpZiAocmVzdWx0Lm1hZ2ljSXRlbXMgJiYgcmVzdWx0Lm1hZ2ljSXRlbXMubGVuZ3RoID49IDEpIHsKICAgICAgICAgIGZvciAodmFyIHMgb2YgcmVzdWx0Lm1hZ2ljSXRlbXMpIHsKICAgICAgICAgICAgaWYgKHMucGlkICE9PSAnbWFnaWNpdGVtJykgewogICAgICAgICAgICAgIGlzVmFsaWQgPSBmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlzVmFsaWQgPSBmYWxzZQogICAgICAgIH0KICAgICAgICBpZiAoaXNWYWxpZCkgewogICAgICAgICAgc2VsZi4kc3RvcmUuY29tbWl0KCdteU1hZ2ljSXRlbXMvc2V0TWFnaWNJdGVtcycsIHJlc3VsdC5tYWdpY0l0ZW1zKQogICAgICAgICAgaWYgKHJlc3VsdC5ub3RQcmludGVkTWFnaWNJdGVtcykgewogICAgICAgICAgICBzZWxmLiRzdG9yZS5jb21taXQoJ215TWFnaWNJdGVtcy9zZXROb3RQcmludGVkTWFnaWNJdGVtcycsIHJlc3VsdC5ub3RQcmludGVkTWFnaWNJdGVtcykKICAgICAgICAgIH0KICAgICAgICAgIHNlbGYuJHN0b3JlLmNvbW1pdCgnc2V0U25hY2tiYXJUZXh0Jywgc2VsZi4kc3RvcmUuc3RhdGUubXlNYWdpY0l0ZW1zLm1hZ2ljSXRlbXMubGVuZ3RoICsgIiBvYmpldHMgbWFnaXF1ZXMgaW5zY3JpdHMgZGFucyB2b3RyZSBiaWJsaW90aMOocXVlIikKICAgICAgICAgIHNlbGYuJHN0b3JlLmNvbW1pdCgnc2V0SXNPcGVuU25hY2tiYXInLCB0cnVlKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZWxmLiRzdG9yZS5jb21taXQoJ3NldFNuYWNrYmFyVGV4dCcsICJMZSBmaWNoaWVyIGVzdCBpbnZhbGlkZSIpCiAgICAgICAgICBzZWxmLiRzdG9yZS5jb21taXQoJ3NldElzT3BlblNuYWNrYmFyJywgdHJ1ZSkKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpCiAgICAgIHRoaXMuJHJlZnMudXBsb2FkZXIudmFsdWUgPSAnJwogICAgfSwKCiAgICBvblVwbG9hZENsaWNrICgpIHsKICAgICAgdGhpcy5pc1VwbG9hZGluZyA9IHRydWUKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKCkgPT4gewogICAgICAgIHRoaXMuaXNVcGxvYWRpbmcgPSBmYWxzZQogICAgICB9LCB7IG9uY2U6IHRydWUgfSkKCiAgICAgIHRoaXMuJHJlZnMudXBsb2FkZXIuY2xpY2soKQogICAgfSwKCiAgICBwcmludCAoKSB7CiAgICAgIHdpbmRvdy5wcmludCgpCiAgICB9LAoKICAgIGNvbmZpcm1EZWxldGlvbiAoKSB7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnbXlNYWdpY0l0ZW1zL3Jlc2V0TWFnaWNJdGVtcycpCiAgICAgIHRoaXMuY29uZmlybURlbGV0ZURpYWxvZyA9IGZhbHNlCiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0U25hY2tiYXJUZXh0JywgIlZvdHJlIGJpYmxpb3Row6hxdWUgZCdvYmpldHMgbWFnaXF1ZXMgYSDDqXTDqSBlZmZhY8OpZSIpCiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0SXNPcGVuU25hY2tiYXInLCB0cnVlKQogICAgfQogIH0sCgogIG1vdW50ZWQgKCkgewogICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRIYXNSaWdodERyYXdlcicsIGZhbHNlKQogICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRSaWdodERyYXdlcicsIHRoaXMuJHZ1ZXRpZnkuYnJlYWtwb2ludC5sZ0FuZFVwKQogICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRJblJpZ2h0RHJhd2VyJywgbnVsbCkKICB9Cn0K"},{"version":3,"sources":["MyMagicItemsLayout.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"MyMagicItemsLayout.vue","sourceRoot":"docs/.vuepress/theme/layouts","sourcesContent":["<template>\n  <div class=\"my-magic-items\">\n    <div class=\"d-flex align-center mb-4 d-print-none\">\n      <Breadcrumb class=\"mr-auto\" />\n      <v-btn color=\"primary\" class=\"mr-4\" depressed link to=\"/creation-d-objet-magique/\"><v-icon left>mdi-plus</v-icon> Créer un objet magique</v-btn>\n      <v-btn color=\"primary\" depressed link to=\"/liste-objets-magiques/\">Liste des objets magiques</v-btn>\n    </div>\n\n\n    <v-dialog v-model=\"confirmDeleteDialog\" max-width=\"290\">\n      <v-card>\n        <v-card-title class=\"headline\">Supprimer les objets magiques</v-card-title>\n\n        <v-card-text>\n          Cette action supprimera tous les objets magiques ajoutés à votre bibliothèque, y compris les objets magiques que vous avez créés. Souhaitez vous les supprimer ?\n        </v-card-text>\n\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn depressed @click=\"confirmDeleteDialog = false\">\n            Annuler\n          </v-btn>\n\n          <v-btn color=\"error darken-1\" depressed @click=\"confirmDeletion\">\n            Supprimer\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n    <v-alert v-model=\"alertOpen\" :type=\"alertType\" dismissible transition=\"fade-transition\">\n      {{ alertText }}\n    </v-alert>\n\n    <MyMagicItems />\n  </div>\n</template>\n\n<script>\nimport Breadcrumb from '@theme/components/Breadcrumb'\nimport MyMagicItems from '@theme/components/MyMagicItems'\nimport { saveAs } from 'file-saver'\n\nexport default {\n  name: 'MyMagicItemsLayout',\n\n  components: {\n    Breadcrumb,\n    MyMagicItems\n  },\n\n  data () {\n    return {\n      isUploading: false,\n      confirmDeleteDialog: false,\n      alertOpen: false,\n      alertText: null,\n      alertType: \"info\"\n    }\n  },\n\n  methods: {\n    download () {\n      saveAs(new Blob([JSON.stringify(this.$store.state.myMagicItems)], {\n          type: \"text/plain;charset=utf-8\"\n      }), \"objets-magiques.json\")\n    },\n\n    upload (e) {\n      let file = e.target.files[0]\n      console.log(file)\n      if (!file) {\n        return\n      }\n      let reader = new FileReader()\n      let self = this\n\n      reader.onload = function() {\n        let result = JSON.parse(reader.result)\n        let isValid = true\n        if (result.magicItems && result.magicItems.length >= 1) {\n          for (var s of result.magicItems) {\n            if (s.pid !== 'magicitem') {\n              isValid = false\n            }\n          }\n        } else {\n          isValid = false\n        }\n        if (isValid) {\n          self.$store.commit('myMagicItems/setMagicItems', result.magicItems)\n          if (result.notPrintedMagicItems) {\n            self.$store.commit('myMagicItems/setNotPrintedMagicItems', result.notPrintedMagicItems)\n          }\n          self.$store.commit('setSnackbarText', self.$store.state.myMagicItems.magicItems.length + \" objets magiques inscrits dans votre bibliothèque\")\n          self.$store.commit('setIsOpenSnackbar', true)\n        } else {\n          self.$store.commit('setSnackbarText', \"Le fichier est invalide\")\n          self.$store.commit('setIsOpenSnackbar', true)\n        }\n      }\n\n      reader.readAsText(file)\n      this.$refs.uploader.value = ''\n    },\n\n    onUploadClick () {\n      this.isUploading = true\n      window.addEventListener('focus', () => {\n        this.isUploading = false\n      }, { once: true })\n\n      this.$refs.uploader.click()\n    },\n\n    print () {\n      window.print()\n    },\n\n    confirmDeletion () {\n      this.$store.commit('myMagicItems/resetMagicItems')\n      this.confirmDeleteDialog = false\n      this.$store.commit('setSnackbarText', \"Votre bibliothèque d'objets magiques a été effacée\")\n      this.$store.commit('setIsOpenSnackbar', true)\n    }\n  },\n\n  mounted () {\n    this.$store.commit('setHasRightDrawer', false)\n    this.$store.commit('setRightDrawer', this.$vuetify.breakpoint.lgAndUp)\n    this.$store.commit('setInRightDrawer', null)\n  }\n}\n</script>\n\n<style>\n</style>\n"]}]}